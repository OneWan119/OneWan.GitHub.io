<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=http://127.0.0.1/contest/nowcoer-summer/2024/contest-1/ rel=canonical><link href=../../../../template/problem-set/ rel=prev><link rel=icon href=../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.12"><title>一 - OneWan-Wiki</title><link rel=stylesheet href=../../../../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#20241 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../../.. title=OneWan-Wiki class="md-header__button md-logo" aria-label=OneWan-Wiki data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OneWan-Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 一 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple aria-label=点击关灯 type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title=点击关灯 for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=lime aria-label=点击开灯 type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title=点击开灯 for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> 导航栏 </a> </li> <li class=md-tabs__item> <a href=../../../../template/default/fast-io/ class=md-tabs__link> 算法竞赛模版 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> 比赛 </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=OneWan-Wiki class="md-nav__button md-logo" aria-label=OneWan-Wiki data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> OneWan-Wiki </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> 导航栏 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 算法竞赛模版 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 算法竞赛模版 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> 基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/default/fast-io/ class=md-nav__link> <span class=md-ellipsis> 快读 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/default/sort/ class=md-nav__link> <span class=md-ellipsis> 排序 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/default/mod-int/ class=md-nav__link> <span class=md-ellipsis> ModInt </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/default/high-accuracy/ class=md-nav__link> <span class=md-ellipsis> 高精度 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/default/builtin/ class=md-nav__link> <span class=md-ellipsis> __builtin </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/default/hash/ class=md-nav__link> <span class=md-ellipsis> 重写哈希函数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 动态规划 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 动态规划 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/sum-over-subsets/ class=md-nav__link> <span class=md-ellipsis> SOSdp </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/knapsack/ class=md-nav__link> <span class=md-ellipsis> 背包dp </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/tree/ class=md-nav__link> <span class=md-ellipsis> 树形dp </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/digit/ class=md-nav__link> <span class=md-ellipsis> 数位dp </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/longest-increasing-subsequence/ class=md-nav__link> <span class=md-ellipsis> 最长不下降子序列 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/longest-common-subsequence/ class=md-nav__link> <span class=md-ellipsis> 最长公共子序列 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_7> <label class=md-nav__link for=__nav_2_2_7 id=__nav_2_2_7_label tabindex=0> <span class=md-ellipsis> 优化 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_7> <span class="md-nav__icon md-icon"></span> 优化 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/optimize/monotonic-queue/ class=md-nav__link> <span class=md-ellipsis> 单调队列优化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/dynamic-programming/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 字符串 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 字符串 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/string/kmp/ class=md-nav__link> <span class=md-ellipsis> KMP </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/string/trie/ class=md-nav__link> <span class=md-ellipsis> 字典树 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/string/manacher/ class=md-nav__link> <span class=md-ellipsis> 马拉车 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/string/ac-automaton/ class=md-nav__link> <span class=md-ellipsis> AC自动机 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/string/string-hash/ class=md-nav__link> <span class=md-ellipsis> 字符串哈希 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/string/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 数学 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 数学 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/common-formula-theorem/ class=md-nav__link> <span class=md-ellipsis> 常见公式及定理 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <label class=md-nav__link for=__nav_2_4_2 id=__nav_2_4_2_label tabindex=0> <span class=md-ellipsis> 数论 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> 数论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/number-theory/default/ class=md-nav__link> <span class=md-ellipsis> 基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/sieve/ class=md-nav__link> <span class=md-ellipsis> 筛法 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/primary-root/ class=md-nav__link> <span class=md-ellipsis> 原根 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/prime/ class=md-nav__link> <span class=md-ellipsis> 素数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/linear-equation/ class=md-nav__link> <span class=md-ellipsis> 同余 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/inverse-modulo/ class=md-nav__link> <span class=md-ellipsis> 逆元 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/residue/ class=md-nav__link> <span class=md-ellipsis> 剩余 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/light-speed-pow/ class=md-nav__link> <span class=md-ellipsis> 光速幂 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/du-sieve/ class=md-nav__link> <span class=md-ellipsis> 杜教筛 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/euler/ class=md-nav__link> <span class=md-ellipsis> 欧拉函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/discrete-logarithm/ class=md-nav__link> <span class=md-ellipsis> 离散对数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/prime-factorization/ class=md-nav__link> <span class=md-ellipsis> 质因数分解 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/chinese-remainder-theorem/ class=md-nav__link> <span class=md-ellipsis> 中国剩余定理 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/mobius/ class=md-nav__link> <span class=md-ellipsis> 莫比乌斯函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/euclidean/ class=md-nav__link> <span class=md-ellipsis> 类欧几里得算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/meissel-lehmer/ class=md-nav__link> <span class=md-ellipsis> Meissel-Lehmer算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/number-theory/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/math/game-theory/ class=md-nav__link> <span class=md-ellipsis> 博弈论 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4> <label class=md-nav__link for=__nav_2_4_4 id=__nav_2_4_4_label tabindex=0> <span class=md-ellipsis> 线性代数 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> 线性代数 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/linear-algebra/matrix/ class=md-nav__link> <span class=md-ellipsis> 矩阵 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/linear-algebra/linear-basis/ class=md-nav__link> <span class=md-ellipsis> 线性基 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_5> <label class=md-nav__link for=__nav_2_4_5 id=__nav_2_4_5_label tabindex=0> <span class=md-ellipsis> 组合数学 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_5> <span class="md-nav__icon md-icon"></span> 组合数学 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/perm-comb/ class=md-nav__link> <span class=md-ellipsis> 排列组合 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/derangement/ class=md-nav__link> <span class=md-ellipsis> 错位排列 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/fibonacci/ class=md-nav__link> <span class=md-ellipsis> 斐波那契 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/inclusion-exclusion/ class=md-nav__link> <span class=md-ellipsis> 容斥原理 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/cantor/ class=md-nav__link> <span class=md-ellipsis> 康托展开 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/partition/ class=md-nav__link> <span class=md-ellipsis> 分拆数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/bell/ class=md-nav__link> <span class=md-ellipsis> 贝尔数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/catalan/ class=md-nav__link> <span class=md-ellipsis> 卡特兰数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/combinatorics/stirling/ class=md-nav__link> <span class=md-ellipsis> 斯特林数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_6> <label class=md-nav__link for=__nav_2_4_6 id=__nav_2_4_6_label tabindex=0> <span class=md-ellipsis> 数值算法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_6> <span class="md-nav__icon md-icon"></span> 数值算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/numerical-algorithm/integration/ class=md-nav__link> <span class=md-ellipsis> 数值积分 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/numerical-algorithm/gauss/ class=md-nav__link> <span class=md-ellipsis> 高斯消元 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/numerical-algorithm/newton/ class=md-nav__link> <span class=md-ellipsis> 牛顿迭代法 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/numerical-algorithm/lagrange/ class=md-nav__link> <span class=md-ellipsis> 拉格朗日插值 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/math/balanced-ternary/ class=md-nav__link> <span class=md-ellipsis> 平衡三进制 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_8> <label class=md-nav__link for=__nav_2_4_8 id=__nav_2_4_8_label tabindex=0> <span class=md-ellipsis> 多项式与生成函数 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_8> <span class="md-nav__icon md-icon"></span> 多项式与生成函数 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/math/poly/polynomial/ class=md-nav__link> <span class=md-ellipsis> 多项式基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/poly/divide-conquer-ntt/ class=md-nav__link> <span class=md-ellipsis> 分治NTT </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/math/poly/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/math/berlekamp-massey/ class=md-nav__link> <span class=md-ellipsis> Berlekamp-Massey算法 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> 图论 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 图论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/graph/shortest-path/ class=md-nav__link> <span class=md-ellipsis> 最短路 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/euler-graph/ class=md-nav__link> <span class=md-ellipsis> 欧拉图 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/bipartite-graph/ class=md-nav__link> <span class=md-ellipsis> 二分图 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/2-SAT/ class=md-nav__link> <span class=md-ellipsis> 2-SAT </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_5> <label class=md-nav__link for=__nav_2_5_5 id=__nav_2_5_5_label tabindex=0> <span class=md-ellipsis> 网络流 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_5> <span class="md-nav__icon md-icon"></span> 网络流 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/graph/flow/max-flow/ class=md-nav__link> <span class=md-ellipsis> 最大流 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/flow/min-cut/ class=md-nav__link> <span class=md-ellipsis> 最小割 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/flow/cost/ class=md-nav__link> <span class=md-ellipsis> 费用流 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_6> <label class=md-nav__link for=__nav_2_5_6 id=__nav_2_5_6_label tabindex=0> <span class=md-ellipsis> 树上问题 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_6> <span class="md-nav__icon md-icon"></span> 树上问题 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/graph/tree/tree-hash/ class=md-nav__link> <span class=md-ellipsis> 树哈希 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/tree/tree-divide/ class=md-nav__link> <span class=md-ellipsis> 树分治 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/tree/heavy-light%20decomposition/ class=md-nav__link> <span class=md-ellipsis> 树链剖分 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/graph/tree/lowest-common-ancestor/ class=md-nav__link> <span class=md-ellipsis> 最近公共祖先 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/graph/minimum-spanning-tree/ class=md-nav__link> <span class=md-ellipsis> 最小生成树 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_8> <label class=md-nav__link for=__nav_2_5_8 id=__nav_2_5_8_label tabindex=0> <span class=md-ellipsis> 连通性相关 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_8> <span class="md-nav__icon md-icon"></span> 连通性相关 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/graph/connectivity/strongly-connected-components/ class=md-nav__link> <span class=md-ellipsis> 强连通分量 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> 数据结构 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> 数据结构 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/data-structure/heap/ class=md-nav__link> <span class=md-ellipsis> 堆 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/block/ class=md-nav__link> <span class=md-ellipsis> 块 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/mo-query/ class=md-nav__link> <span class=md-ellipsis> 莫队 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/sparse-table/ class=md-nav__link> <span class=md-ellipsis> ST表 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/dsu/ class=md-nav__link> <span class=md-ellipsis> 并查集 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/monotonic-stack/ class=md-nav__link> <span class=md-ellipsis> 单调栈 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/monotonic-queue/ class=md-nav__link> <span class=md-ellipsis> 单调队列 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/segment-tree/ class=md-nav__link> <span class=md-ellipsis> 线段树 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/fenwick-tree/ class=md-nav__link> <span class=md-ellipsis> 树状数组 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_10> <label class=md-nav__link for=__nav_2_6_10 id=__nav_2_6_10_label tabindex=0> <span class=md-ellipsis> 平衡树 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_10> <span class="md-nav__icon md-icon"></span> 平衡树 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/data-structure/balanced-tree/treap/ class=md-nav__link> <span class=md-ellipsis> Treap </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/chtholly-tree/ class=md-nav__link> <span class=md-ellipsis> 珂朵莉树 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/data-structure/disjunction-tree/ class=md-nav__link> <span class=md-ellipsis> 析合树 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_13> <label class=md-nav__link for=__nav_2_6_13 id=__nav_2_6_13_label tabindex=0> <span class=md-ellipsis> 可持久化数据结构 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_13_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_13> <span class="md-nav__icon md-icon"></span> 可持久化数据结构 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/data-structure/persistent/segment-tree/ class=md-nav__link> <span class=md-ellipsis> 可持久化线段树 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> 计算几何 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> 计算几何 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/computational-geometry/default/ class=md-nav__link> <span class=md-ellipsis> 基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/convex-hull/ class=md-nav__link> <span class=md-ellipsis> 凸包 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/scanning/ class=md-nav__link> <span class=md-ellipsis> 扫描线 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/rotating-calipers/ class=md-nav__link> <span class=md-ellipsis> 旋转卡壳 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/half-plane/ class=md-nav__link> <span class=md-ellipsis> 半平面交 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/triangulation/ class=md-nav__link> <span class=md-ellipsis> 三角剖分 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/computational-geometry/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8_1> <label class=md-nav__link for=__nav_2_8_1 id=__nav_2_8_1_label tabindex=0> <span class=md-ellipsis> 随机化 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_8_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8_1> <span class="md-nav__icon md-icon"></span> 随机化 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/other/randomization/radom/ class=md-nav__link> <span class=md-ellipsis> 随机数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/randomization/hill-climbing/ class=md-nav__link> <span class=md-ellipsis> 爬山算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/randomization/simulated-annealing/ class=md-nav__link> <span class=md-ellipsis> 模拟退火 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8_2> <label class=md-nav__link for=__nav_2_8_2 id=__nav_2_8_2_label tabindex=0> <span class=md-ellipsis> 区间 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8_2> <span class="md-nav__icon md-icon"></span> 区间 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../template/other/interval/gcd/ class=md-nav__link> <span class=md-ellipsis> 区间gcd </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/interval/mode/ class=md-nav__link> <span class=md-ellipsis> 区间众数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/interval/perm/ class=md-nav__link> <span class=md-ellipsis> 区间排列 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/interval/inversion-pair/ class=md-nav__link> <span class=md-ellipsis> 区间逆序对 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/interval/subarray-sum/ class=md-nav__link> <span class=md-ellipsis> 区间子段和 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/other/complex/ class=md-nav__link> <span class=md-ellipsis> 复数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/frac/ class=md-nav__link> <span class=md-ellipsis> 分数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/beat-matching/ class=md-nav__link> <span class=md-ellipsis> 对拍 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/manhattan-distance/ class=md-nav__link> <span class=md-ellipsis> 曼哈顿距离 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/inversion-pair/ class=md-nav__link> <span class=md-ellipsis> 逆序对 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/bracket-sequence/ class=md-nav__link> <span class=md-ellipsis> 括号序列 </span> </a> </li> <li class=md-nav__item> <a href=../../../../template/other/factorial/ class=md-nav__link> <span class=md-ellipsis> 阶乘 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../template/problem-set/ class=md-nav__link> <span class=md-ellipsis> 习题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> 比赛 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 比赛 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> 牛客多校 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> 牛客多校 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class=md-ellipsis> 2024 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> 2024 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 一 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 一 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#a-a-bit-common class=md-nav__link> <span class=md-ellipsis> A A Bit Common </span> </a> <nav class=md-nav aria-label="A A Bit Common"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 题意 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 解题思路 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 解题代码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#b-a-bit-more-common class=md-nav__link> <span class=md-ellipsis> B A Bit More Common </span> </a> <nav class=md-nav aria-label="B A Bit More Common"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_1 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_1 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#c-sum-of-suffix-sums class=md-nav__link> <span class=md-ellipsis> C Sum of Suffix Sums </span> </a> <nav class=md-nav aria-label="C Sum of Suffix Sums"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_2 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_2 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 题意 </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 解题思路 </span> </a> </li> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 解题代码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#d-xor-of-suffix-sums class=md-nav__link> <span class=md-ellipsis> D XOR of Suffix Sums </span> </a> <nav class=md-nav aria-label="D XOR of Suffix Sums"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_31 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_3 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_32 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_33 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_34 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_3 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_35 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_36 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#e-product-of-suffix-sums class=md-nav__link> <span class=md-ellipsis> E Product of Suffix Sums </span> </a> <nav class=md-nav aria-label="E Product of Suffix Sums"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_37 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_38 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_39 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_4 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_40 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_41 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_42 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_4 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_43 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_44 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#f-career-path class=md-nav__link> <span class=md-ellipsis> F Career Path </span> </a> <nav class=md-nav aria-label="F Career Path"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_45 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_46 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_47 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_5 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_48 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_49 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_50 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_5 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_51 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_52 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> <span class=md-ellipsis> 示例3 </span> </a> <nav class=md-nav aria-label=示例3> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_53 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_54 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#g-32-square-strings class=md-nav__link> <span class=md-ellipsis> G 3/2 Square Strings </span> </a> <nav class=md-nav aria-label="G 3/2 Square Strings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_55 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_56 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_57 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_6 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_58 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_59 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_60 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_6 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_61 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_62 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#h-world-finals class=md-nav__link> <span class=md-ellipsis> H World Finals </span> </a> <nav class=md-nav aria-label="H World Finals"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_63 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_64 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_65 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_7 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_66 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_67 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_68 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_69 class=md-nav__link> <span class=md-ellipsis> 题意 </span> </a> </li> <li class=md-nav__item> <a href=#_70 class=md-nav__link> <span class=md-ellipsis> 解题思路 </span> </a> </li> <li class=md-nav__item> <a href=#_71 class=md-nav__link> <span class=md-ellipsis> 解题代码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#i-mirror-maze class=md-nav__link> <span class=md-ellipsis> I Mirror Maze </span> </a> <nav class=md-nav aria-label="I Mirror Maze"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_72 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_73 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_74 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_8 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_75 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_76 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_77 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_78 class=md-nav__link> <span class=md-ellipsis> 题意 </span> </a> </li> <li class=md-nav__item> <a href=#_79 class=md-nav__link> <span class=md-ellipsis> 解题思路 </span> </a> </li> <li class=md-nav__item> <a href=#_80 class=md-nav__link> <span class=md-ellipsis> 解题代码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#j-2d-travel class=md-nav__link> <span class=md-ellipsis> J 2D Travel </span> </a> <nav class=md-nav aria-label="J 2D Travel"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_81 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_82 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_83 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_9 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_84 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_85 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> <li class=md-nav__item> <a href=#_86 class=md-nav__link> <span class=md-ellipsis> 说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2_7 class=md-nav__link> <span class=md-ellipsis> 示例2 </span> </a> <nav class=md-nav aria-label=示例2> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_87 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_88 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#k-matching-problem class=md-nav__link> <span class=md-ellipsis> K Matching Problem </span> </a> <nav class=md-nav aria-label="K Matching Problem"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_89 class=md-nav__link> <span class=md-ellipsis> 题目描述 </span> </a> </li> <li class=md-nav__item> <a href=#_90 class=md-nav__link> <span class=md-ellipsis> 输入描述 </span> </a> </li> <li class=md-nav__item> <a href=#_91 class=md-nav__link> <span class=md-ellipsis> 输出描述 </span> </a> </li> <li class=md-nav__item> <a href=#1_10 class=md-nav__link> <span class=md-ellipsis> 示例1 </span> </a> <nav class=md-nav aria-label=示例1> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_92 class=md-nav__link> <span class=md-ellipsis> 输入 </span> </a> </li> <li class=md-nav__item> <a href=#_93 class=md-nav__link> <span class=md-ellipsis> 输出 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=20241>2024牛客暑期多校训练营1</h1> <p><a href=https://ac.nowcoder.com/acm/contest/81596>比赛链接</a></p> <p><a href=../contest-1.pdf>英文题面</a></p> <p><a href=../contest-1-Editorial.pdf>题解</a></p> <p>标绿表示有题解</p> <p><strong>难度梯度 <span class=arithmatex>\(\color{rgb(0,255,0)}{CH A}\)</span> BDI FJ EG K</strong></p> <h2 id=a-a-bit-common>A A Bit Common</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FA&parentPath=%2F">标程/数据</a></p> <h3 id=_1>题目描述</h3> <p>Given two integers <span class=arithmatex>\(n\)</span> and <span class=arithmatex>\(m\)</span>, among all the sequences containing <span class=arithmatex>\(n\)</span> non-negative integers less than <span class=arithmatex>\(2^m\)</span>, you need to count the number of such sequences <span class=arithmatex>\(A\)</span> that there exists a non-empty subsequence of <span class=arithmatex>\(A\)</span> in which the bitwise AND of the integers is <span class=arithmatex>\(1\)</span>. </p> <p>Note that a non-empty subsequence of a sequence <span class=arithmatex>\(A\)</span> is a non-empty sequence that can be obtained by deleting zero or more elements from <span class=arithmatex>\(A\)</span> and arranging the remaining elements in their original order. </p> <p>Since the answer may be very large, output it modulo a positive integer <span class=arithmatex>\(q\)</span>. </p> <p>The bitwise AND of non-negative integers <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span>, <span class=arithmatex>\(A\ \texttt{AND}\ B\)</span> is defined as follows:</p> <ul> <li>When <span class=arithmatex>\(A\ \texttt{AND}\ B\)</span> is written in base two, the digit in the <span class=arithmatex>\(2^d\)</span>'s place (<span class=arithmatex>\(d \ge 0\)</span>) is <span class=arithmatex>\(1\)</span> if those of <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span> are <strong>both</strong> <span class=arithmatex>\(1\)</span>, and <span class=arithmatex>\(0\)</span> otherwise.</li> </ul> <p>For example, we have <span class=arithmatex>\(4\ \texttt{AND}\ 6\)</span> = <span class=arithmatex>\(4\)</span> (in base two: <span class=arithmatex>\(100\ \texttt{AND}\ 110\)</span> = <span class=arithmatex>\(100\)</span>). </p> <p>Generally, the bitwise AND of <span class=arithmatex>\(k\)</span> non-negative integers <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span> is defined as<br> <span class=arithmatex>\((\ldots((p_1\ \texttt{AND}\ p_2)\ \texttt{AND}\ p_3)\ \texttt{AND}\ \ldots\ \texttt{AND}\ p_k)\)</span><br> and we can prove that this value does not depend on the order of <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span>.</p> <h3 id=_2>输入描述</h3> <p>The only line contains three integers <span class=arithmatex>\(n\)</span> (<span class=arithmatex>\(1 \le n \le 5\,000\)</span>), <span class=arithmatex>\(m\)</span> (<span class=arithmatex>\(1 \le m \le 5\,000\)</span>) and <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 10^9\)</span>).</p> <h3 id=_3>输出描述</h3> <p>Output a line containing an integer, denoting the answer.</p> <h3 id=1>示例1</h3> <h4 id=_4>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a>2 3 998244353
</span></code></pre></div></td></tr></table></div> <h4 id=_5>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a>17
</span></code></pre></div></td></tr></table></div> <h3 id=2>示例2</h3> <h4 id=_6>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>5000 5000 998244353
</span></code></pre></div></td></tr></table></div> <h4 id=_7>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a>2274146
</span></code></pre></div></td></tr></table></div> <h3 id=_8>题意</h3> <p>有一个长度为 <span class=arithmatex>\(n\)</span> 的序列，元素均在 <span class=arithmatex>\([0,2^m)\)</span>。</p> <p>问有多少个这样的序列满足条件：存在一个非空子序列的按位与为 <span class=arithmatex>\(1\)</span>。</p> <p>答案对 <span class=arithmatex>\(q\)</span> 取模。</p> <h3 id=_9>解题思路</h3> <p>考虑到条件中是子序列的按位与为 <span class=arithmatex>\(1\)</span>，</p> <p>我们可以枚举存在长度为 <span class=arithmatex>\(i\)</span> <span class=arithmatex>\((1\le i\le n)\)</span> 的子序列，按位与为 <span class=arithmatex>\(1\)</span>，</p> <p>那么首先需要在 <span class=arithmatex>\(n\)</span> 个位置选 <span class=arithmatex>\(i\)</span> 个出来放这个子序列，然后剩下 <span class=arithmatex>\(n-i\)</span> 个位置则放其他数，</p> <p>并且要满足这 <span class=arithmatex>\(n-i\)</span> 个数的按位与不为 <span class=arithmatex>\(1\)</span>，若要按位与不为 <span class=arithmatex>\(1\)</span>，则二进制最低位全为 <span class=arithmatex>\(0\)</span> 即可满足。</p> <p>这样的数有 <span class=arithmatex>\(2^{m-1}\)</span> 种，因为有 <span class=arithmatex>\(n-i\)</span> 个数，所以一共有 <span class=arithmatex>\(2^{(m-1)*(n-i)}\)</span> 种放置方案。</p> <p>接下来要考虑 长度 <span class=arithmatex>\(i\)</span> 的子序列的按位与为 <span class=arithmatex>\(1\)</span>，则二进制最低位一定要为 <span class=arithmatex>\(1\)</span>。</p> <p>其次就是按位与之后的其他位要为 <span class=arithmatex>\(0\)</span>，即至少有 <span class=arithmatex>\(1\)</span> 位数字该二进制为 <span class=arithmatex>\(0\)</span>。</p> <p>如果二进制除了最低位只有 <span class=arithmatex>\(1\)</span> 位，那么方案数是 <span class=arithmatex>\(C_i^1+C_i^2+…+C_i^i=2^i-1\)</span></p> <p>因为二进制除了最低位有 <span class=arithmatex>\(m\)</span> 位，所以方案数为 <span class=arithmatex>\((2^i-1)^{m-1}\)</span></p> <p>最终答案为 <span class=arithmatex>\(\sum_{i=1}^nC_n^i*(2^i-1)^{m-1}*2^{(m-1)*(n-i)} \mod q\)</span></p> <h3 id=_10>解题代码</h3> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span>
<span class=normal><a href=#__codelineno-4-13>13</a></span>
<span class=normal><a href=#__codelineno-4-14>14</a></span>
<span class=normal><a href=#__codelineno-4-15>15</a></span>
<span class=normal><a href=#__codelineno-4-16>16</a></span>
<span class=normal><a href=#__codelineno-4-17>17</a></span>
<span class=normal><a href=#__codelineno-4-18>18</a></span>
<span class=normal><a href=#__codelineno-4-19>19</a></span>
<span class=normal><a href=#__codelineno-4-20>20</a></span>
<span class=normal><a href=#__codelineno-4-21>21</a></span>
<span class=normal><a href=#__codelineno-4-22>22</a></span>
<span class=normal><a href=#__codelineno-4-23>23</a></span>
<span class=normal><a href=#__codelineno-4-24>24</a></span>
<span class=normal><a href=#__codelineno-4-25>25</a></span>
<span class=normal><a href=#__codelineno-4-26>26</a></span>
<span class=normal><a href=#__codelineno-4-27>27</a></span>
<span class=normal><a href=#__codelineno-4-28>28</a></span>
<span class=normal><a href=#__codelineno-4-29>29</a></span>
<span class=normal><a href=#__codelineno-4-30>30</a></span>
<span class=normal><a href=#__codelineno-4-31>31</a></span>
<span class=normal><a href=#__codelineno-4-32>32</a></span>
<span class=normal><a href=#__codelineno-4-33>33</a></span>
<span class=normal><a href=#__codelineno-4-34>34</a></span>
<span class=normal><a href=#__codelineno-4-35>35</a></span>
<span class=normal><a href=#__codelineno-4-36>36</a></span>
<span class=normal><a href=#__codelineno-4-37>37</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=k>using</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=p>;</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=n>i64</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=mi>5005</span><span class=p>][</span><span class=mi>5005</span><span class=p>];</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=kt>int</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=n>i64</span><span class=w> </span><span class=nf>qpow</span><span class=p>(</span><span class=n>i64</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>    </span><span class=n>res</span><span class=w> </span><span class=o>%=</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>            </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>        </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>        </span><span class=n>b</span><span class=w> </span><span class=o>&gt;&gt;=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>res</span><span class=p>;</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16></a><span class=p>}</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>    </span><span class=n>cout</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23></a><span class=w>    </span><span class=n>c</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>5000</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25></a><span class=w>        </span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27></a><span class=w>            </span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>])</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30></a><span class=w>    </span><span class=n>i64</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32></a><span class=w>        </span><span class=n>i64</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>qpow</span><span class=p>((</span><span class=n>qpow</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>p</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>qpow</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>i</span><span class=p>))</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33></a><span class=w>        </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ans</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>res</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-37><a id=__codelineno-4-37 name=__codelineno-4-37></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=b-a-bit-more-common>B A Bit More Common</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FB&parentPath=%2F">标程/数据</a></p> <h3 id=_11>题目描述</h3> <p>Given two integers <span class=arithmatex>\(n\)</span> and <span class=arithmatex>\(m\)</span>, among all the sequences containing <span class=arithmatex>\(n\)</span> non-negative integers less than <span class=arithmatex>\(2^m\)</span>, you need to count the number of such sequences <span class=arithmatex>\(A\)</span> that there exists <strong>two different</strong> non-empty subsequences of <span class=arithmatex>\(A\)</span> in each of which the bitwise AND of the integers is <span class=arithmatex>\(1\)</span>. </p> <p>Note that a non-empty subsequence of a sequence <span class=arithmatex>\(A\)</span> is a non-empty sequence that can be obtained by deleting zero or more elements from <span class=arithmatex>\(A\)</span> and arranging the remaining elements in their original order. <strong>Two subsequences are different if they are composed of different locations in the original sequence</strong><strong>.</strong> </p> <p>Since the answer may be very large, output it modulo a positive integer <span class=arithmatex>\(q\)</span>. </p> <p>The bitwise AND of non-negative integers <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span>, <span class=arithmatex>\(A\ \texttt{AND}\ B\)</span> is defined as follows: </p> <ul> <li>When <span class=arithmatex>\(A\ \texttt{AND}\ B\)</span> is written in base two, the digit in the <span class=arithmatex>\(2^d\)</span>'s place (<span class=arithmatex>\(d \ge 0\)</span>) is <span class=arithmatex>\(1\)</span> if those of <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span> are <strong>both</strong> <span class=arithmatex>\(1\)</span>, and <span class=arithmatex>\(0\)</span> otherwise.</li> </ul> <p>For example, we have <span class=arithmatex>\(4\ \texttt{AND}\ 6\)</span> = <span class=arithmatex>\(4\)</span> (in base two: <span class=arithmatex>\(100\ \texttt{AND}\ 110\)</span> = <span class=arithmatex>\(100\)</span>). </p> <p>Generally, the bitwise AND of <span class=arithmatex>\(k\)</span> non-negative integers <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span> is defined as<br> <span class=arithmatex>\((\ldots((p_1\ \texttt{AND}\ p_2)\ \texttt{AND}\ p_3)\ \texttt{AND}\ \ldots\ \texttt{AND}\ p_k)\)</span><br> and we can prove that this value does not depend on the order of <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span>.</p> <h3 id=_12>输入描述</h3> <p>The only line contains three integers <span class=arithmatex>\(n\)</span> (<span class=arithmatex>\(1 \le n \le 5\,000\)</span>), <span class=arithmatex>\(m\)</span> (<span class=arithmatex>\(1 \le m \le 5\,000\)</span>) and <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 10^9\)</span>).</p> <h3 id=_13>输出描述</h3> <p>Output a line containing an integer, denoting the answer.</p> <h3 id=1_1>示例1</h3> <h4 id=_14>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a>2 3 998244353
</span></code></pre></div></td></tr></table></div> <h4 id=_15>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a>7
</span></code></pre></div></td></tr></table></div> <h3 id=2_1>示例2</h3> <h4 id=_16>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a>5000 5000 998244353
</span></code></pre></div></td></tr></table></div> <h4 id=_17>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a>530227736
</span></code></pre></div></td></tr></table></div> <h2 id=c-sum-of-suffix-sums>C Sum of Suffix Sums</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FC">标程/数据</a></p> <h3 id=_18>题目描述</h3> <p>Given an array which is initially empty, you need to perform <span class=arithmatex>\(q\)</span> operations: </p> <ul> <li>Given two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span>, take out the element from the end of the array for <span class=arithmatex>\(t\)</span> times and then append <span class=arithmatex>\(v\)</span> to the end of the array. It is guaranteed that <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</li> </ul> <p>After each operation, let <span class=arithmatex>\(a_1, a_2, \ldots, a_n\)</span> be the current array, find the <strong>sum</strong> of <span class=arithmatex>\(s_1, s_2, \ldots, s_n\)</span>, where <span class=arithmatex>\(s_i = a_i + a_{i+1} + \ldots + a_n\)</span> is the sum of the suffix starting from position <span class=arithmatex>\(i\)</span>. </p> <p>Since the answers may be very large, output them modulo <span class=arithmatex>\(1\,000\,000\,007\)</span>.</p> <p>The first line contains an integer <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 5 \times 10^5\)</span>), denoting the number of operations. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span> (<span class=arithmatex>\(0 \le v \le 10^9\)</span>), describing an operation, where <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</p> <h3 id=_19>输入描述</h3> <p>The first line contains an integer <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 5 \times 10^5\)</span>), denoting the number of operations. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span> (<span class=arithmatex>\(0 \le v \le 10^9\)</span>), describing an operation, where <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</p> <h3 id=_20>输出描述</h3> <p>Output <span class=arithmatex>\(q\)</span> lines, each of which contains an integer, denoting the answer.</p> <h3 id=1_2>示例1</h3> <h4 id=_21>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span>
<span class=normal><a href=#__codelineno-9-3>3</a></span>
<span class=normal><a href=#__codelineno-9-4>4</a></span>
<span class=normal><a href=#__codelineno-9-5>5</a></span>
<span class=normal><a href=#__codelineno-9-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a>5
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a>0 1
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a>0 2
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a>1 3
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a>0 6
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a>2 100000
</span></code></pre></div></td></tr></table></div> <h4 id=_22>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span>
<span class=normal><a href=#__codelineno-10-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a>1
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a>5
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a>7
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a>25
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a>200001
</span></code></pre></div></td></tr></table></div> <h4 id=_23>说明</h4> <p>After the first operation, the current array is <span class=arithmatex>\([1]\)</span>, the suffix sum array is <span class=arithmatex>\([1]\)</span>, and the sum of the suffix sums is <span class=arithmatex>\(1\)</span>.<br> After the second operation, the current array is <span class=arithmatex>\([1,2]\)</span>, the suffix sum array is <span class=arithmatex>\([3,2]\)</span>, and the sum of the suffix sums is <span class=arithmatex>\(5\)</span>.<br> After the third operation, the current array is <span class=arithmatex>\([1,3]\)</span>, the suffix sum array is <span class=arithmatex>\([4,3]\)</span>, and the sum of the suffix sums is <span class=arithmatex>\(7\)</span>.<br> After the fourth operation, the current array is <span class=arithmatex>\([1,3,6]\)</span>, the suffix sum array is <span class=arithmatex>\([10,9,6]\)</span>, and the sum of the suffix sums is <span class=arithmatex>\(25\)</span>.<br> After the fifth operation, the current array is <span class=arithmatex>\([1,100\,000]\)</span>, the suffix sum array is <span class=arithmatex>\([100\,001,100\,000]\)</span>, and the sum of the suffix sums is <span class=arithmatex>\(200\,001\)</span>.</p> <h3 id=2_2>示例2</h3> <h4 id=_24>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a>1
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a>0 1000000000
</span></code></pre></div></td></tr></table></div> <h4 id=_25>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a>1000000000
</span></code></pre></div></td></tr></table></div> <h3 id=_26>题意</h3> <p>一个空数组，需要进行 <span class=arithmatex>\(q\)</span> 次操作。</p> <p>每次操作如下：</p> <ul> <li>有两个非负整数 <span class=arithmatex>\(t,v\)</span>，首先从数组的末尾删去 <span class=arithmatex>\(t\)</span> 个数，然后再将 <span class=arithmatex>\(v\)</span> 插入到数组的末尾。</li> </ul> <p>假设 <span class=arithmatex>\(n\)</span> 为当前数组的大小。</p> <p>令 <span class=arithmatex>\(s_i=\sum_{j=i}^na_j,ans=\sum_{i=1}^ns_i\)</span></p> <p>请你输出每次操作后的 <span class=arithmatex>\(ans\)</span>。</p> <h3 id=_27>解题思路</h3> <p>可以考虑到 <span class=arithmatex>\(ans\)</span> 的定义，其实可以写成 <span class=arithmatex>\(ans=\sum_{i=1}^ni*a_i\)</span>。</p> <p>那么已知，如果是删掉数组末尾的一位，<span class=arithmatex>\(ans\)</span> 减少 <span class=arithmatex>\(n*a_n\)</span>，</p> <p>如果是将 <span class=arithmatex>\(v\)</span> 插入到数组末尾，<span class=arithmatex>\(ans\)</span> 增加 <span class=arithmatex>\((n+1)*v\)</span>。</p> <p>这个贡献转移是 <span class=arithmatex>\(O(1)\)</span> 的，</p> <p>因为最多 <span class=arithmatex>\(500000\)</span> 次操作，也就是说 <span class=arithmatex>\(500000\)</span> 次插入，那么删除也不超过 <span class=arithmatex>\(500000\)</span> 次。</p> <p>我们暴力插入和删除，然后 <span class=arithmatex>\(O(1)\)</span> 求贡献即可。</p> <p>总时间复杂度 <span class=arithmatex>\(O(q)\)</span></p> <h3 id=_28>解题代码</h3> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1> 1</a></span>
<span class=normal><a href=#__codelineno-13-2> 2</a></span>
<span class=normal><a href=#__codelineno-13-3> 3</a></span>
<span class=normal><a href=#__codelineno-13-4> 4</a></span>
<span class=normal><a href=#__codelineno-13-5> 5</a></span>
<span class=normal><a href=#__codelineno-13-6> 6</a></span>
<span class=normal><a href=#__codelineno-13-7> 7</a></span>
<span class=normal><a href=#__codelineno-13-8> 8</a></span>
<span class=normal><a href=#__codelineno-13-9> 9</a></span>
<span class=normal><a href=#__codelineno-13-10>10</a></span>
<span class=normal><a href=#__codelineno-13-11>11</a></span>
<span class=normal><a href=#__codelineno-13-12>12</a></span>
<span class=normal><a href=#__codelineno-13-13>13</a></span>
<span class=normal><a href=#__codelineno-13-14>14</a></span>
<span class=normal><a href=#__codelineno-13-15>15</a></span>
<span class=normal><a href=#__codelineno-13-16>16</a></span>
<span class=normal><a href=#__codelineno-13-17>17</a></span>
<span class=normal><a href=#__codelineno-13-18>18</a></span>
<span class=normal><a href=#__codelineno-13-19>19</a></span>
<span class=normal><a href=#__codelineno-13-20>20</a></span>
<span class=normal><a href=#__codelineno-13-21>21</a></span>
<span class=normal><a href=#__codelineno-13-22>22</a></span>
<span class=normal><a href=#__codelineno-13-23>23</a></span>
<span class=normal><a href=#__codelineno-13-24>24</a></span>
<span class=normal><a href=#__codelineno-13-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><span class=k>using</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=p>;</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a><span class=k>const</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=n>P</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1000000007</span><span class=p>;</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><span class=w>    </span><span class=n>cout</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>a</span><span class=p>;</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12></a><span class=w>    </span><span class=n>i64</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>t</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>;</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15></a><span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>v</span><span class=p>;</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17></a><span class=w>            </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ans</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=p>(</span><span class=n>i64</span><span class=p>)</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>back</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>P</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>P</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>P</span><span class=p>;</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18></a><span class=w>            </span><span class=n>a</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20></a><span class=w>        </span><span class=n>a</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>v</span><span class=p>);</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21></a><span class=w>        </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ans</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>i64</span><span class=p>)</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>back</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>P</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>P</span><span class=p>;</span>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=d-xor-of-suffix-sums>D XOR of Suffix Sums</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FD&parentPath=%2F">标程/数据</a></p> <h3 id=_29>题目描述</h3> <p>Given an array which is initially empty, you need to perform <span class=arithmatex>\(q\)</span> operations: </p> <ul> <li>Given two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span>, take out the element from the end of the array for <span class=arithmatex>\(t\)</span> times and then append <span class=arithmatex>\(v\)</span> to the end of the array. It is guaranteed that <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</li> </ul> <p>After each operation, let <span class=arithmatex>\(a_1, a_2, \ldots, a_n\)</span> be the current array, find the bitwise <strong>XOR</strong> of <span class=arithmatex>\(s_1, s_2, \ldots, s_n\)</span>, where <span class=arithmatex>\(s_i = a_i + a_{i+1} + \ldots + a_n\)</span> is the sum of the suffix starting from position <span class=arithmatex>\(i\)</span>. </p> <p>Since the answers may be very large, output them modulo <span class=arithmatex>\(2\,097\,152\)</span>. </p> <p>The bitwise XOR of non-negative integers <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span>, <span class=arithmatex>\(A \oplus B\)</span> is defined as follows: </p> <ul> <li>When <span class=arithmatex>\(A \oplus B\)</span> is written in base two, the digit in the <span class=arithmatex>\(2^d\)</span>'s place (<span class=arithmatex>\(d \ge 0\)</span>) is <span class=arithmatex>\(1\)</span> if exactly one of the digits in that place of <span class=arithmatex>\(A\)</span> and <span class=arithmatex>\(B\)</span> is <span class=arithmatex>\(1\)</span>, and <span class=arithmatex>\(0\)</span> otherwise.</li> </ul> <p>For example, we have <span class=arithmatex>\(3 \oplus 5 = 6\)</span> (in base two: <span class=arithmatex>\(011 \oplus 101 = 110\)</span>). </p> <p>Generally, the bitwise XOR of <span class=arithmatex>\(k\)</span> non-negative integers <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span> is defined as<br> <span class=arithmatex>\((\ldots((p_1 \oplus p_2) \oplus p_3) \oplus \ldots \oplus p_k)\)</span><br> and we can prove that this value does not depend on the order of <span class=arithmatex>\(p_1, p_2, \ldots, p_k\)</span>.</p> <h3 id=_30>输入描述</h3> <p>The first line contains an integer <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 5 \times 10^5\)</span>), denoting the number of operations. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span> (<span class=arithmatex>\(0 \le v \le 10^9\)</span>), describing an operation, where <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</p> <h3 id=_31>输出描述</h3> <p>Output <span class=arithmatex>\(q\)</span> lines, each of which contains an integer, denoting the answer.</p> <h3 id=1_3>示例1</h3> <h4 id=_32>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1>1</a></span>
<span class=normal><a href=#__codelineno-14-2>2</a></span>
<span class=normal><a href=#__codelineno-14-3>3</a></span>
<span class=normal><a href=#__codelineno-14-4>4</a></span>
<span class=normal><a href=#__codelineno-14-5>5</a></span>
<span class=normal><a href=#__codelineno-14-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a>5
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a>0 1
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a>0 2
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a>1 3
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a>0 6
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a>2 100000
</span></code></pre></div></td></tr></table></div> <h4 id=_33>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1>1</a></span>
<span class=normal><a href=#__codelineno-15-2>2</a></span>
<span class=normal><a href=#__codelineno-15-3>3</a></span>
<span class=normal><a href=#__codelineno-15-4>4</a></span>
<span class=normal><a href=#__codelineno-15-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a>1
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a>1
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a>7
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4></a>5
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5></a>1
</span></code></pre></div></td></tr></table></div> <h4 id=_34>说明</h4> <p>After the first operation, the current array is <span class=arithmatex>\([1]\)</span>, the suffix sum array is <span class=arithmatex>\([1]\)</span>, and the bitwise XOR of the suffix sums is <span class=arithmatex>\(1\)</span>.<br> After the second operation, the current array is <span class=arithmatex>\([1,2]\)</span>, the suffix sum array is <span class=arithmatex>\([3,2]\)</span>, and the bitwise XOR of the suffix sums is <span class=arithmatex>\(1\)</span>.<br> After the third operation, the current array is <span class=arithmatex>\([1,3]\)</span>, the suffix sum array is <span class=arithmatex>\([4,3]\)</span>, and the bitwise XOR of the suffix sums is <span class=arithmatex>\(7\)</span>.<br> After the fourth operation, the current array is <span class=arithmatex>\([1,3,6]\)</span>, the suffix sum array is <span class=arithmatex>\([10,9,6]\)</span>, and the bitwise XOR of the suffix sums is <span class=arithmatex>\(5\)</span>.<br> After the fifth operation, the current array is <span class=arithmatex>\([1,100\,000]\)</span>, the suffix sum array is <span class=arithmatex>\([100\,001,100\,000]\)</span>, and the bitwise XOR of the suffix sums is <span class=arithmatex>\(1\)</span>.</p> <h3 id=2_3>示例2</h3> <h4 id=_35>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1>1</a></span>
<span class=normal><a href=#__codelineno-16-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a>1
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a>0 1000000000
</span></code></pre></div></td></tr></table></div> <h4 id=_36>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a>1755648
</span></code></pre></div></td></tr></table></div> <h2 id=e-product-of-suffix-sums>E Product of Suffix Sums</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FE&parentPath=%2F">标程/数据</a></p> <h3 id=_37>题目描述</h3> <p>Given an array which is initially empty, you need to perform <span class=arithmatex>\(q\)</span> operations: </p> <ul> <li>Given two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span>, take out the element from the end of the array for <span class=arithmatex>\(t\)</span> times and then append <span class=arithmatex>\(v\)</span> to the end of the array. It is guaranteed that <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</li> </ul> <p>After each operation, let <span class=arithmatex>\(a_1, a_2, \ldots, a_n\)</span> be the current array, find the <strong>product</strong> of <span class=arithmatex>\(s_1, s_2, \ldots, s_n\)</span>, where <span class=arithmatex>\(s_i = a_i + a_{i+1} + \ldots + a_n\)</span> is the sum of the suffix starting from position <span class=arithmatex>\(i\)</span>. </p> <p>Since the answers may be very large, output them modulo <span class=arithmatex>\(1\,004\,535\,809\)</span>.</p> <h3 id=_38>输入描述</h3> <p>The first line contains an integer <span class=arithmatex>\(q\)</span> (<span class=arithmatex>\(1 \le q \le 1.3 \times 10^5\)</span>), denoting the number of operations. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains two non-negative integers <span class=arithmatex>\(t\)</span> and <span class=arithmatex>\(v\)</span> (<span class=arithmatex>\(0 \le v \le 10^9\)</span>), describing an operation, where <span class=arithmatex>\(t\)</span> does not exceed the length of the array before this operation.</p> <h3 id=_39>输出描述</h3> <p>Output <span class=arithmatex>\(q\)</span> lines, each of which contains an integer, denoting the answer.</p> <h3 id=1_4>示例1</h3> <h4 id=_40>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-18-1>1</a></span>
<span class=normal><a href=#__codelineno-18-2>2</a></span>
<span class=normal><a href=#__codelineno-18-3>3</a></span>
<span class=normal><a href=#__codelineno-18-4>4</a></span>
<span class=normal><a href=#__codelineno-18-5>5</a></span>
<span class=normal><a href=#__codelineno-18-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a>5
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a>0 1
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a>0 2
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a>1 3
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a>0 6
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a>2 100000
</span></code></pre></div></td></tr></table></div> <h4 id=_41>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1>1</a></span>
<span class=normal><a href=#__codelineno-19-2>2</a></span>
<span class=normal><a href=#__codelineno-19-3>3</a></span>
<span class=normal><a href=#__codelineno-19-4>4</a></span>
<span class=normal><a href=#__codelineno-19-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a>1
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a>6
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a>12
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a>540
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a>959277719
</span></code></pre></div></td></tr></table></div> <h4 id=_42>说明</h4> <p>After the first operation, the current array is <span class=arithmatex>\([1]\)</span>, the suffix sum array is <span class=arithmatex>\([1]\)</span>, and the product of the suffix sums is <span class=arithmatex>\(1\)</span>.<br> After the second operation, the current array is <span class=arithmatex>\([1,2]\)</span>, the suffix sum array is <span class=arithmatex>\([3,2]\)</span>, and the product of the suffix sums is <span class=arithmatex>\(6\)</span>.<br> After the third operation, the current array is <span class=arithmatex>\([1,3]\)</span>, the suffix sum array is <span class=arithmatex>\([4,3]\)</span>, and the product of the suffix sums is <span class=arithmatex>\(12\)</span>.<br> After the fourth operation, the current array is <span class=arithmatex>\([1,3,6]\)</span>, the suffix sum array is <span class=arithmatex>\([10,9,6]\)</span>, and the product of the suffix sums is <span class=arithmatex>\(540\)</span>.<br> After the fifth operation, the current array is <span class=arithmatex>\([1,100\,000]\)</span>, the suffix sum array is <span class=arithmatex>\([100\,001,100\,000]\)</span>, and the product of the suffix sums is <span class=arithmatex>\(10\,000\,100\,000\)</span>, where the remainder divided by <span class=arithmatex>\(1\,004\,535\,809\)</span> is <span class=arithmatex>\(959\,277\,719\)</span>.</p> <h3 id=2_4>示例2</h3> <h4 id=_43>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1>1</a></span>
<span class=normal><a href=#__codelineno-20-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a>1
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a>0 1000000000
</span></code></pre></div></td></tr></table></div> <h4 id=_44>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-21-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1></a>1000000000
</span></code></pre></div></td></tr></table></div> <h2 id=f-career-path>F Career Path</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FF&parentPath=%2F">标程/数据</a></p> <h3 id=_45>题目描述</h3> <p>Little Q has <span class=arithmatex>\(X\)</span> years of work experience and is currently unemployed. He wants to plan the career path for the next <span class=arithmatex>\(N\)</span> years and then retire. More specifically, assume that today is the first day of the <span class=arithmatex>\(1\)</span>-st year, and Little Q will officially retire on the last day of the <span class=arithmatex>\(N\)</span>-th year. </p> <p>There are <span class=arithmatex>\(M\)</span> companies in total, the <span class=arithmatex>\(i\)</span>-th of which will be founded on the first day in the <span class=arithmatex>\(L_i\)</span>-th year and go bankrupt after paying all the employees' payment on the last day of the <span class=arithmatex>\(R_i\)</span>-th year. That is, Little Q can start working for the company on the first day from the <span class=arithmatex>\(L_i\)</span>-th year to the <span class=arithmatex>\(R_i\)</span>-th year. </p> <p>Each company's fiscal year is from the first day to the last day of one year. An employee who starts on the first day and is still employed on the last day in one year will receive all the payments as a reward for working hard for a full year. Since Little Q is highly skilled, every company is willing to hire him at any time. However, Little Q only works for at most one company in a year and considers changing jobs after receiving all the payments on the last day of the year and being able to start at a different company on the first day of the next year. If he chooses to work for a company in a year, he will gain a year of work experience. </p> <p>Assume that, on the first day of some year, Little Q has <span class=arithmatex>\(Y\)</span> years of work experience in total, and has already worked for <span class=arithmatex>\(Z\)</span> full years continuously since the latest time being newly employed by the <span class=arithmatex>\(i\)</span>-th company, and he will work for the <span class=arithmatex>\(i\)</span>-th company in this full year: </p> <ul> <li>He will receive a payment of <span class=arithmatex>\(A_i \times Y + B_i\)</span> as a signing fee on the last day of this year if he is just newly employed, i.e. <span class=arithmatex>\(Z = 0\)</span>.</li> <li>He will receive a payment of <span class=arithmatex>\(C_i \times Y + D_i\)</span> as annual cash salary on the last day of the year. If the company goes bankrupt just on the last day of the year, he will also receive another cash payment of <span class=arithmatex>\(\frac{(Z+2)(C_i \times Y + D_i)}{12}\)</span> as compensation and then resign from the company.</li> <li>He will receive a payment of <span class=arithmatex>\(E_i \times Z + F_i\)</span> as annual bonus on the last day of the year if the company doesn't go bankrupt on this day.</li> <li>He will receive <span class=arithmatex>\(G_i \times Y + H_i\)</span> units of unvested stock shares as annual stock bonus on the last day of the year. The stock shares will be vested in equal portions upon Little Q along with the payments in each of the following <span class=arithmatex>\(I_i\)</span> years after the year receiving. Resigning from the company will automatically give up all the unvested stock shares, and sell all vested shares forcedly.</li> </ul> <p>The stock price for the <span class=arithmatex>\(i\)</span>-th company in the <span class=arithmatex>\(j\)</span>-th year is <span class=arithmatex>\(P_{i,j}\)</span> per share, that is, sell <span class=arithmatex>\(p\)</span> shares of stock of the <span class=arithmatex>\(i\)</span>-th company in the <span class=arithmatex>\(j\)</span>-th year will receive a payment of <span class=arithmatex>\(P_{i,j} \times p\)</span>, where <span class=arithmatex>\(p\)</span> could be any positive real number. The price is updated on the first day of every year and remains valid for the entire year. The stock price is <span class=arithmatex>\(0\)</span> if the company has not yet been founded or has already gone bankrupt. The only way to gain stock shares is from annual stock bonus, but he can choose to sell vested stock shares at any time at the current price as long as he is still working at this company. Little Q must sell all the remaining vested stock shares at that year's price when he resigns from the company. </p> <p>Additionally, the <span class=arithmatex>\(i\)</span>-th company has non-compete restrictions, which means Little Q cannot work at the companies indexed in range <span class=arithmatex>\([U_i, V_i]\)</span> in the next year if he resigns from the <span class=arithmatex>\(i\)</span>-th company before the day he retires or the day the company goes bankrupt: </p> <ul> <li>If there are surviving companies indexed in range <span class=arithmatex>\([U_i, V_i]\)</span> but Little Q chooses to take a gap year in the next year, he will receive a one-time payment of <span class=arithmatex>\(J_i \times W + K_i\)</span> for the non-compete compensation since he has already worked for the company for <span class=arithmatex>\(W\)</span> full years continuously since the latest time being newly employed by the <span class=arithmatex>\(i\)</span>-th company. The gap year will not be counted in the number of years of work experience.</li> <li>Otherwise, he receives no non-compete compensation and cannot work in companies indexed in range within <span class=arithmatex>\([U_i, V_i]\)</span> in the next year.</li> </ul> <p>You need to help Little Q design a career path that maximizes his total income for the next <span class=arithmatex>\(N\)</span> years. The unsold stock shares will not be counted in Little Q's income.</p> <h3 id=_46>输入描述</h3> <p>The first line contains three integers <span class=arithmatex>\(X\)</span>, <span class=arithmatex>\(N\)</span>, and <span class=arithmatex>\(M\)</span>. </p> <p>Then <span class=arithmatex>\(2M\)</span> lines follow, where each of the <span class=arithmatex>\(M\)</span> companies is described by two lines. For the <span class=arithmatex>\(i\)</span>-th company: </p> <p>The first line consists of <span class=arithmatex>\(15\)</span> integers: <span class=arithmatex>\(A_i\)</span>, <span class=arithmatex>\(B_i\)</span>, <span class=arithmatex>\(C_i\)</span>, <span class=arithmatex>\(D_i\)</span>, <span class=arithmatex>\(E_i\)</span>, <span class=arithmatex>\(F_i\)</span>, <span class=arithmatex>\(G_i\)</span>, <span class=arithmatex>\(H_i\)</span>, <span class=arithmatex>\(I_i\)</span>, <span class=arithmatex>\(U_i\)</span>, <span class=arithmatex>\(V_i\)</span>, <span class=arithmatex>\(J_i\)</span>, <span class=arithmatex>\(K_i\)</span>, <span class=arithmatex>\(L_i\)</span>, and <span class=arithmatex>\(R_i\)</span>. It is guaranteed that <span class=arithmatex>\(I_i &gt; 0\)</span>, <span class=arithmatex>\(1 \le U_i \le V_i \le M\)</span>, and <span class=arithmatex>\(0 \le L_i \le R_i \le N\)</span>. </p> <p>The second line consists of <span class=arithmatex>\(N\)</span> integers <span class=arithmatex>\(P_{i,1}, P_{i,2}, \ldots, P_{i,N}\)</span>, representing the stock prices for the following <span class=arithmatex>\(N\)</span> years. It is guaranteed that the stock price is <span class=arithmatex>\(0\)</span> if the company has not yet been founded or has already gone bankrupt. This line would be empty if <span class=arithmatex>\(N=0\)</span>. </p> <p>The stock option prices are integers in the range <span class=arithmatex>\([0, 8000]\)</span>, and all other input values are integers in the range <span class=arithmatex>\([0, 100]\)</span>.</p> <h3 id=_47>输出描述</h3> <p>Output a line containing a single real number, indicating the maximum total income for the next <span class=arithmatex>\(N\)</span> years. </p> <p>Your answer will be considered correct if its absolute or relative error does not exceed <span class=arithmatex>\(10^{-6}\)</span>. Formally speaking, suppose that your output is <span class=arithmatex>\(a\)</span> and the jury's answer is <span class=arithmatex>\(b\)</span>, your output is accepted if and only if <span class=arithmatex>\(\frac{|a - b|}{\max(1, |b|)} \le 10^{-6}\)</span>.</p> <h3 id=1_5>示例1</h3> <h4 id=_48>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-22-1>1</a></span>
<span class=normal><a href=#__codelineno-22-2>2</a></span>
<span class=normal><a href=#__codelineno-22-3>3</a></span>
<span class=normal><a href=#__codelineno-22-4>4</a></span>
<span class=normal><a href=#__codelineno-22-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1></a>5 10 2
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2></a>3 1 2 48 1 6 2 8 4 2 2 1 24 1 7
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3></a>1 1 2 2 3 3 4 0 0 0
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4></a>1 5 5 25 0 10 3 10 5 1 1 2 10 3 10
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5></a>0 0 0 1 3 1 3 1 3 1
</span></code></pre></div></td></tr></table></div> <h4 id=_49>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-23-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1></a>1338.933333333333
</span></code></pre></div></td></tr></table></div> <h4 id=_50>说明</h4> <p>For the first sample case:<br> Little Q works for the <span class=arithmatex>\(1\)</span>-st company in the first <span class=arithmatex>\(7\)</span> years and receives<br> ･ a signing fee of <span class=arithmatex>\(16\)</span>;<br> ･ cash salaries of <span class=arithmatex>\(448\)</span> in total, along with a compensation of <span class=arithmatex>\(\frac{140}{3}\)</span> since the company goes bankrupt in the <span class=arithmatex>\(7\)</span>-th year;<br> ･ annual bonuses totaling <span class=arithmatex>\(51\)</span>;<br> ･ <span class=arithmatex>\(168\)</span> units of stock shares in total, among which <span class=arithmatex>\(98\)</span> units are vested and all sold at a price of <span class=arithmatex>\(4\)</span>. </p> <p>Then Little Q works for the <span class=arithmatex>\(2\)</span>-nd company in the last <span class=arithmatex>\(3\)</span> years.</p> <h3 id=2_5>示例2</h3> <h4 id=_51>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-24-1>1</a></span>
<span class=normal><a href=#__codelineno-24-2>2</a></span>
<span class=normal><a href=#__codelineno-24-3>3</a></span>
<span class=normal><a href=#__codelineno-24-4>4</a></span>
<span class=normal><a href=#__codelineno-24-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1></a>5 10 2
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2></a>3 1 2 48 1 6 2 8 4 2 2 1 24 1 6
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3></a>1 1 2 2 3 3 0 0 0 0
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4></a>1 5 5 25 0 10 3 10 5 1 1 2 10 3 10
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5></a>0 0 0 1 3 1 3 1 3 1
</span></code></pre></div></td></tr></table></div> <h4 id=_52>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-25-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1></a>1247.500000000000
</span></code></pre></div></td></tr></table></div> <h3 id=3>示例3</h3> <h4 id=_53>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-26-1>1</a></span>
<span class=normal><a href=#__codelineno-26-2>2</a></span>
<span class=normal><a href=#__codelineno-26-3>3</a></span>
<span class=normal><a href=#__codelineno-26-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1></a>5 0 2
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2></a>3 1 2 48 1 6 2 8 4 2 2 1 24 0 0
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4></a>1 5 5 25 0 10 3 10 5 1 1 2 10 0 0
</span></code></pre></div></td></tr></table></div> <h4 id=_54>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-27-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1></a>0.000000000000
</span></code></pre></div></td></tr></table></div> <h2 id=g-32-square-strings>G 3/2 Square Strings</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FG&parentPath=%2F">标程/数据</a></p> <h3 id=_55>题目描述</h3> <p>Given two strings <span class=arithmatex>\(S = s_1 s_2 \cdots s_{|S|}\)</span> and <span class=arithmatex>\(T = t_1 t_2 \cdots t_{|T|}\)</span>, where <span class=arithmatex>\(|S|\)</span> denotes the length of <span class=arithmatex>\(S\)</span>, and <span class=arithmatex>\(|T|\)</span> denotes the length of <span class=arithmatex>\(T\)</span>, you need to count the number of quadruples <span class=arithmatex>\((p,q,u,v)\)</span>, such that <span class=arithmatex>\(1 \le p \le q \le |S|\)</span>, <span class=arithmatex>\(1 \le u \le v \le |T|\)</span>, and <span class=arithmatex>\(t_u t_{u+1} \cdots t_v\)</span> is a square string where the first half is identical to <span class=arithmatex>\(s_p s_{p+1} \cdots s_q\)</span>. </p> <p>Recall that a square string is a string of even length in which the first half is identical to the second half. For example, ``aaaa'' and ``abcabc'' are square strings, while ``aaa'' and ``abcabd'' are not. </p> <p>Since the answer may be very large, output it modulo <span class=arithmatex>\(998\,244\,353\)</span>.</p> <h3 id=_56>输入描述</h3> <p>The input consists of two lines, where the first line contains the string <span class=arithmatex>\(S\)</span>, and the second line contains the string <span class=arithmatex>\(T\)</span>. </p> <p>It is guaranteed that both <span class=arithmatex>\(S\)</span> and <span class=arithmatex>\(T\)</span> consist only of lowercase English letters and their lengths do not exceed <span class=arithmatex>\(2 \times 10^5\)</span>.</p> <h3 id=_57>输出描述</h3> <p>Output a line containing an integer, denoting the answer.</p> <h3 id=1_6>示例1</h3> <h4 id=_58>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-28-1>1</a></span>
<span class=normal><a href=#__codelineno-28-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1></a>ababab
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2></a>ababaa
</span></code></pre></div></td></tr></table></div> <h4 id=_59>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-29-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1></a>8
</span></code></pre></div></td></tr></table></div> <h4 id=_60>说明</h4> <p>For the first sample case, the <span class=arithmatex>\(8\)</span> quadruples are <span class=arithmatex>\((1,1,5,6)\)</span>, <span class=arithmatex>\((1,2,1,4)\)</span>, <span class=arithmatex>\((2,3,2,5)\)</span>, <span class=arithmatex>\((3,3,5,6)\)</span>, <span class=arithmatex>\((3,4,1,4)\)</span>, <span class=arithmatex>\((4,5,2,5)\)</span>, <span class=arithmatex>\((5,5,5,6)\)</span>, and <span class=arithmatex>\((5,6,1,4)\)</span>.</p> <h3 id=2_6>示例2</h3> <h4 id=_61>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-30-1>1</a></span>
<span class=normal><a href=#__codelineno-30-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1></a>aaaaaaaa
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2></a>aaaaaaaa
</span></code></pre></div></td></tr></table></div> <h4 id=_62>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-31-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1></a>114
</span></code></pre></div></td></tr></table></div> <h2 id=h-world-finals>H World Finals</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FH&parentPath=%2F">标程/数据</a></p> <h3 id=_63>题目描述</h3> <p>The ICPC World Finals are coming. Due to some reasons, the 46th and 47th World Finals will be held simultaneously. For the teams qualified in both competitions, they should choose one to take part in. </p> <p>As we know, lzr010506's team is double-qualified and should make a choice. To make a wiser choice, lzr010506 looked up the qualified lists for two competitions and trained a magic model to predict the results for all participants among the two competitions. Moreover, a result contains the number of solved problems and the time penalty. The more solved problems, the better the result is, and if two teams solved the same number of problems, the result with the lower time penalty is better. </p> <p>Now, lzr010506 wants to know the best possible ranking if the actual results are all the same as predicted and that the competition choices of the double-qualified teams can be arbitrarily arranged by him.</p> <h3 id=_64>输入描述</h3> <p>The first line contains one integer <span class=arithmatex>\(n\,(1 \le n \le 10^5)\)</span>, denoting the number of teams qualified in the 46th World Finals. </p> <p>Next <span class=arithmatex>\(n\)</span> lines each contain one string <span class=arithmatex>\(S\,(1 \le |S| \le 10)\)</span> and two integers <span class=arithmatex>\(p,t\,(1 \le p,t \le 10^9)\)</span>, denoting the name, the predicted number of solved problems, and time penalty of one team in the 46th World Finals respectively. </p> <p>Next one line contains one integer <span class=arithmatex>\(m\,(1 \le m \le 10^5)\)</span>, denoting the number of teams qualified in the 47th World Finals. </p> <p>Next <span class=arithmatex>\(m\)</span> lines each contain one string <span class=arithmatex>\(S\,(1 \le |S| \le 10)\)</span> and two integers <span class=arithmatex>\(p,t\,(1 \le p,t \le 10^9)\)</span>, denoting the name, the predicted number of solved problems, and time penalty of one team in the 47th World Finals respectively. </p> <p>It is guaranteed that:<br> · the team names only contain digits and English letters;<br> · the team names in one competition are different from each other;<br> · no two teams have the same predicted number of solved problems and the time penalty simultaneously in one competition;<br> · the same names among two qualified name lists refer to the same team in real; </p> <p>· ''lzr010506'' appears in both two qualified name lists.</p> <h3 id=_65>输出描述</h3> <p>Output one line containing one integer, denoting the best possible ranking of lzr010506's team.</p> <h3 id=1_7>示例1</h3> <h4 id=_66>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-32-1> 1</a></span>
<span class=normal><a href=#__codelineno-32-2> 2</a></span>
<span class=normal><a href=#__codelineno-32-3> 3</a></span>
<span class=normal><a href=#__codelineno-32-4> 4</a></span>
<span class=normal><a href=#__codelineno-32-5> 5</a></span>
<span class=normal><a href=#__codelineno-32-6> 6</a></span>
<span class=normal><a href=#__codelineno-32-7> 7</a></span>
<span class=normal><a href=#__codelineno-32-8> 8</a></span>
<span class=normal><a href=#__codelineno-32-9> 9</a></span>
<span class=normal><a href=#__codelineno-32-10>10</a></span>
<span class=normal><a href=#__codelineno-32-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1></a>5
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2></a>pku 10 1513
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3></a>thu 8 1195
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4></a>lzr010506 8 1234
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5></a>MIT 9 816
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6></a>ntu 8 1325
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7></a>4
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8></a>mipt 9 1143
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9></a>ntu 7 962
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10></a>lzr010506 9 1523
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11></a>pku 9 1068
</span></code></pre></div></td></tr></table></div> <h4 id=_67>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-33-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1></a>2
</span></code></pre></div></td></tr></table></div> <h4 id=_68>说明</h4> <p>There are three double-qualified teams: lzr010506, pku, ntu. </p> <p>One possible arrangement is that pku takes part in the 46th World Finals while lzr010506 and ntu take part in the 47th World Finals. As a result, lzr010506's team could get rank 2 in the 47th World Finals. According to the arrangement, we can get the boards of the two competitions as follows: </p> <p>· The board of the 46th World Finals:<br> 1. pku, solved 10, penalty 1513<br> 2. MIT, solved 9, penalty 816<br> 3. thu, solved 8, penalty 1195 </p> <p>· The board of the 47th World Finals:<br> 1. mipt, solved 9, penalty 1143<br> 2. lzr010506, solved 9, penalty 1523<br> 3. ntu, solved 7, penalty 962</p> <h3 id=_69>题意</h3> <p>有两场比赛，分别有 <span class=arithmatex>\(n,m\)</span> 个队伍参加。</p> <p>给出每个队伍的预测成绩(解题数和罚时)，</p> <p>每个队伍只能参加一场比赛，也必须参加异常</p> <p>如果让你来安排比赛，问 lzr010506 参加任意比赛的最好排名。</p> <h3 id=_70>解题思路</h3> <p>如果两场比赛都参加，就可以把这个队伍(除 lzr010506)的预测解题数改为 <span class=arithmatex>\(-1\)</span>，</p> <p>因为如果 lzr010506 参加第一场比赛，那么就可以让都参加的队伍去参加第二场，从而让 lzr010506 的排名尽可能靠前，</p> <p>如果 lzr010506 参加第二场比赛，同理。</p> <p>然后对解题数和罚时排序，分别求出两场比赛 lzr010506 的名次，并取最优即可。</p> <h3 id=_71>解题代码</h3> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-34-1> 1</a></span>
<span class=normal><a href=#__codelineno-34-2> 2</a></span>
<span class=normal><a href=#__codelineno-34-3> 3</a></span>
<span class=normal><a href=#__codelineno-34-4> 4</a></span>
<span class=normal><a href=#__codelineno-34-5> 5</a></span>
<span class=normal><a href=#__codelineno-34-6> 6</a></span>
<span class=normal><a href=#__codelineno-34-7> 7</a></span>
<span class=normal><a href=#__codelineno-34-8> 8</a></span>
<span class=normal><a href=#__codelineno-34-9> 9</a></span>
<span class=normal><a href=#__codelineno-34-10>10</a></span>
<span class=normal><a href=#__codelineno-34-11>11</a></span>
<span class=normal><a href=#__codelineno-34-12>12</a></span>
<span class=normal><a href=#__codelineno-34-13>13</a></span>
<span class=normal><a href=#__codelineno-34-14>14</a></span>
<span class=normal><a href=#__codelineno-34-15>15</a></span>
<span class=normal><a href=#__codelineno-34-16>16</a></span>
<span class=normal><a href=#__codelineno-34-17>17</a></span>
<span class=normal><a href=#__codelineno-34-18>18</a></span>
<span class=normal><a href=#__codelineno-34-19>19</a></span>
<span class=normal><a href=#__codelineno-34-20>20</a></span>
<span class=normal><a href=#__codelineno-34-21>21</a></span>
<span class=normal><a href=#__codelineno-34-22>22</a></span>
<span class=normal><a href=#__codelineno-34-23>23</a></span>
<span class=normal><a href=#__codelineno-34-24>24</a></span>
<span class=normal><a href=#__codelineno-34-25>25</a></span>
<span class=normal><a href=#__codelineno-34-26>26</a></span>
<span class=normal><a href=#__codelineno-34-27>27</a></span>
<span class=normal><a href=#__codelineno-34-28>28</a></span>
<span class=normal><a href=#__codelineno-34-29>29</a></span>
<span class=normal><a href=#__codelineno-34-30>30</a></span>
<span class=normal><a href=#__codelineno-34-31>31</a></span>
<span class=normal><a href=#__codelineno-34-32>32</a></span>
<span class=normal><a href=#__codelineno-34-33>33</a></span>
<span class=normal><a href=#__codelineno-34-34>34</a></span>
<span class=normal><a href=#__codelineno-34-35>35</a></span>
<span class=normal><a href=#__codelineno-34-36>36</a></span>
<span class=normal><a href=#__codelineno-34-37>37</a></span>
<span class=normal><a href=#__codelineno-34-38>38</a></span>
<span class=normal><a href=#__codelineno-34-39>39</a></span>
<span class=normal><a href=#__codelineno-34-40>40</a></span>
<span class=normal><a href=#__codelineno-34-41>41</a></span>
<span class=normal><a href=#__codelineno-34-42>42</a></span>
<span class=normal><a href=#__codelineno-34-43>43</a></span>
<span class=normal><a href=#__codelineno-34-44>44</a></span>
<span class=normal><a href=#__codelineno-34-45>45</a></span>
<span class=normal><a href=#__codelineno-34-46>46</a></span>
<span class=normal><a href=#__codelineno-34-47>47</a></span>
<span class=normal><a href=#__codelineno-34-48>48</a></span>
<span class=normal><a href=#__codelineno-34-49>49</a></span>
<span class=normal><a href=#__codelineno-34-50>50</a></span>
<span class=normal><a href=#__codelineno-34-51>51</a></span>
<span class=normal><a href=#__codelineno-34-52>52</a></span>
<span class=normal><a href=#__codelineno-34-53>53</a></span>
<span class=normal><a href=#__codelineno-34-54>54</a></span>
<span class=normal><a href=#__codelineno-34-55>55</a></span>
<span class=normal><a href=#__codelineno-34-56>56</a></span>
<span class=normal><a href=#__codelineno-34-57>57</a></span>
<span class=normal><a href=#__codelineno-34-58>58</a></span>
<span class=normal><a href=#__codelineno-34-59>59</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3></a><span class=k>using</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=p>;</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4></a><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7></a><span class=w>    </span><span class=k>friend</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=k>operator</span><span class=o>&lt;</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Node</span><span class=w> </span><span class=o>&amp;</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>Node</span><span class=w> </span><span class=o>&amp;</span><span class=n>y</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>solve</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>solve</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>time</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>solve</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>solve</span><span class=p>;</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13></a><span class=p>};</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15></a><span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16></a><span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17></a><span class=w>    </span><span class=n>cout</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>mp</span><span class=p>;</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&gt;</span><span class=w> </span><span class=n>v1</span><span class=p>,</span><span class=w> </span><span class=n>v2</span><span class=p>;</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23></a><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25></a><span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>solve</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26></a><span class=w>        </span><span class=n>v1</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>time</span><span class=p>});</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27></a><span class=w>        </span><span class=n>mp</span><span class=p>[</span><span class=n>name</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32></a><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-34><a id=__codelineno-34-34 name=__codelineno-34-34></a><span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>solve</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
</span><span id=__span-34-35><a id=__codelineno-34-35 name=__codelineno-34-35></a><span class=w>        </span><span class=n>v2</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>time</span><span class=p>});</span>
</span><span id=__span-34-36><a id=__codelineno-34-36 name=__codelineno-34-36></a><span class=w>        </span><span class=n>mp</span><span class=p>[</span><span class=n>name</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-34-37><a id=__codelineno-34-37 name=__codelineno-34-37></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-38><a id=__codelineno-34-38 name=__codelineno-34-38></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=o>&amp;</span><span class=n>v1</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>v2</span><span class=p>})</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-39><a id=__codelineno-34-39 name=__codelineno-34-39></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=p>[</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>_</span><span class=p>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>*</span><span class=n>v</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-40><a id=__codelineno-34-40 name=__codelineno-34-40></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>mp</span><span class=p>[</span><span class=n>name</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s>&quot;lzr010506&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-41><a id=__codelineno-34-41 name=__codelineno-34-41></a><span class=w>                </span><span class=n>solve</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>-1</span><span class=p>;</span>
</span><span id=__span-34-42><a id=__codelineno-34-42 name=__codelineno-34-42></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-34-43><a id=__codelineno-34-43 name=__codelineno-34-43></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-34-44><a id=__codelineno-34-44 name=__codelineno-34-44></a><span class=w>        </span><span class=n>sort</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=o>*</span><span class=n>v</span><span class=p>),</span><span class=w> </span><span class=n>end</span><span class=p>(</span><span class=o>*</span><span class=n>v</span><span class=p>));</span>
</span><span id=__span-34-45><a id=__codelineno-34-45 name=__codelineno-34-45></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-46><a id=__codelineno-34-46 name=__codelineno-34-46></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=p>);</span>
</span><span id=__span-34-47><a id=__codelineno-34-47 name=__codelineno-34-47></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=n>v</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=o>&amp;</span><span class=n>v1</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>v2</span><span class=p>})</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-48><a id=__codelineno-34-48 name=__codelineno-34-48></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>rk</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-34-49><a id=__codelineno-34-49 name=__codelineno-34-49></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=p>[</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>solve</span><span class=p>,</span><span class=w> </span><span class=n>_</span><span class=p>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>*</span><span class=n>v</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-50><a id=__codelineno-34-50 name=__codelineno-34-50></a><span class=w>            </span><span class=n>rk</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-34-51><a id=__codelineno-34-51 name=__codelineno-34-51></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;lzr010506&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-52><a id=__codelineno-34-52 name=__codelineno-34-52></a><span class=w>                </span><span class=n>ans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>ans</span><span class=p>,</span><span class=w> </span><span class=n>rk</span><span class=p>);</span>
</span><span id=__span-34-53><a id=__codelineno-34-53 name=__codelineno-34-53></a><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-34-54><a id=__codelineno-34-54 name=__codelineno-34-54></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-34-55><a id=__codelineno-34-55 name=__codelineno-34-55></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-34-56><a id=__codelineno-34-56 name=__codelineno-34-56></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-57><a id=__codelineno-34-57 name=__codelineno-34-57></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-34-58><a id=__codelineno-34-58 name=__codelineno-34-58></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-34-59><a id=__codelineno-34-59 name=__codelineno-34-59></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=i-mirror-maze>I Mirror Maze</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FI&parentPath=%2F">标程/数据</a></p> <h3 id=_72>题目描述</h3> <p>There is an <span class=arithmatex>\(n\times m\)</span> mirror maze, where there is a mirror on each grid. The mirrors are in one of the following four types: </p> <ul> <li>``-'', the light from above or below will be reflected back, the light from left or right will continue going forward without being reflected, respectively;</li> <li>``|'', the light from left or right will be reflected back, the light from above or below will continue going forward without being reflected, respectively;</li> <li>``/'', the light from left, right, above, below will be reflected to go above, below, left, right, respectively;</li> <li>``<span class=arithmatex>\(\backslash\)</span>'', the light from left, right, above, below will be reflected to go below, above, right, left, respectively.</li> </ul> <p>Now there are <span class=arithmatex>\(q\)</span> light sources. Little G, the believer of the light, wants to know the numbers of different mirrors the emitted light will be reflected by within sufficient time for each light source.</p> <h3 id=_73>输入描述</h3> <p>The first line contains two integers <span class=arithmatex>\(n,m\,(1 \le n,m \le 1\,000)\)</span>, denoting the size of the mirror maze. </p> <p>Each of the following <span class=arithmatex>\(n\)</span> lines contains a string of length <span class=arithmatex>\(m\)</span>, where the <span class=arithmatex>\(j\)</span>-th character in the <span class=arithmatex>\(i\)</span>-th line <span class=arithmatex>\(S_{i,j}\,(S_{i,j} \in \{|, -, /, \backslash\})\)</span> denotes the mirror on grid <span class=arithmatex>\((i,j)\)</span>. </p> <p>The next line contains an integer <span class=arithmatex>\(q\,(1 \le q \le 10^5)\)</span>, denoting the number of light sources. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains two integers <span class=arithmatex>\(u\,(1 \le u \le n)\)</span>, <span class=arithmatex>\(v\,(1 \le v \le m)\)</span> and a string <span class=arithmatex>\(dir\,(dir \in \{above, below, left, right\})\)</span>, denoting that a light source is on grid <span class=arithmatex>\((u,v)\)</span> and emits light going along the <span class=arithmatex>\(dir\)</span> direction. Specifically, the light will not be influenced by the mirror on grid <span class=arithmatex>\((u,v)\)</span> initially.</p> <h3 id=_74>输出描述</h3> <p>Output <span class=arithmatex>\(q\)</span> lines each containing one integer, denoting the number of different mirrors the emitted light will be reflected by within sufficient time for each light source.</p> <h3 id=1_8>示例1</h3> <h4 id=_75>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-35-1>1</a></span>
<span class=normal><a href=#__codelineno-35-2>2</a></span>
<span class=normal><a href=#__codelineno-35-3>3</a></span>
<span class=normal><a href=#__codelineno-35-4>4</a></span>
<span class=normal><a href=#__codelineno-35-5>5</a></span>
<span class=normal><a href=#__codelineno-35-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1></a>2 3
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2></a>/\\-
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3></a>\\/|
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4></a>2
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5></a>1 2 below
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6></a>2 2 right
</span></code></pre></div></td></tr></table></div> <h4 id=_76>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-36-1>1</a></span>
<span class=normal><a href=#__codelineno-36-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1></a>4
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2></a>2
</span></code></pre></div></td></tr></table></div> <h4 id=_77>说明</h4> <p>· For the first light, it will be reflected by the mirrors at <span class=arithmatex>\((2,2), (2,1), (1,1), (1,2)\)</span> repeatedly and stay in the mirror maze.<br> · For the second light, it will be reflected by <span class=arithmatex>\((2,3)\)</span> and go back to <span class=arithmatex>\((2,2)\)</span>, then reflected by <span class=arithmatex>\((2,2)\)</span>, go below, and get away from the mirror maze. </p> <h3 id=_78>题意</h3> <p>有 <span class=arithmatex>\(n*m\)</span> 面镜子，每个镜子有 '|'、'\'、'-'、'/'。</p> <p>对于 '|' 来说，如果光从左方或右方发射过来，则会直线反射回相反的方向，如果光从上方或下方发射过来，则会直接穿过镜子不会反射；</p> <p>对于 '-' 来说，如果光从上方或下方发射过来，则会直线反射回相反的方向，如果光从左方或右方发射过来，则会直接穿过镜子不会反射；</p> <p>对于 '\' 来说，如果光从左方或下方发射过来，则会反射到下方或左方，如果光从右方或上方发射过来，则会反射到上方或右方；</p> <p>对于 '/' 来说，如果光从左方或上方发射过来，则会反射到上方或左方，如果光从右方或下方发射过来，则会反射到下方或右方；</p> <p>然后 <span class=arithmatex>\(q\)</span> 次询问，每次询问给定一个点，和一个方向，</p> <p>问你从这个点按照这个方向发射一道光，会被多少不同的镜子<em>反射</em>。</p> <h3 id=_79>解题思路</h3> <p>我们可以知道，可能有一些镜子构成了回路，使得光无限反射，也就是环。</p> <p>易知，从外部一定无法进环。</p> <p>所以我们可以分成两类，一种是从环中出发，一种是不从环中出发。</p> <p>我们对每面镜子建立四个方向节点，枚举每个点，进行染色，求出连通块，在过程中，若要前往的下一个点已经被染色，则说明是一个环。</p> <p>染色后，枚举每个环，预处理中环上被反射的镜子种数，如果连续路径没有改变方向，说明没有发生反射，否则我们可以把这个点(不带方向)放入集合中。</p> <p>处理完环之后，我们对链进行处理。</p> <p>我们可以知道，任意一条链的终点一定是射向外界的。</p> <p>因为这条链有重复的点(不带方向)，所以我们不能简单的记忆化，</p> <p>我们可以反着来，假设是从外界射向内部，则我们的顺序正好是，这条链的逆序，这样不会算重复的贡献。</p> <p>所以我们类似于环的处理方法，对路径逆序处理即可。</p> <h3 id=_80>解题代码</h3> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-37-1>  1</a></span>
<span class=normal><a href=#__codelineno-37-2>  2</a></span>
<span class=normal><a href=#__codelineno-37-3>  3</a></span>
<span class=normal><a href=#__codelineno-37-4>  4</a></span>
<span class=normal><a href=#__codelineno-37-5>  5</a></span>
<span class=normal><a href=#__codelineno-37-6>  6</a></span>
<span class=normal><a href=#__codelineno-37-7>  7</a></span>
<span class=normal><a href=#__codelineno-37-8>  8</a></span>
<span class=normal><a href=#__codelineno-37-9>  9</a></span>
<span class=normal><a href=#__codelineno-37-10> 10</a></span>
<span class=normal><a href=#__codelineno-37-11> 11</a></span>
<span class=normal><a href=#__codelineno-37-12> 12</a></span>
<span class=normal><a href=#__codelineno-37-13> 13</a></span>
<span class=normal><a href=#__codelineno-37-14> 14</a></span>
<span class=normal><a href=#__codelineno-37-15> 15</a></span>
<span class=normal><a href=#__codelineno-37-16> 16</a></span>
<span class=normal><a href=#__codelineno-37-17> 17</a></span>
<span class=normal><a href=#__codelineno-37-18> 18</a></span>
<span class=normal><a href=#__codelineno-37-19> 19</a></span>
<span class=normal><a href=#__codelineno-37-20> 20</a></span>
<span class=normal><a href=#__codelineno-37-21> 21</a></span>
<span class=normal><a href=#__codelineno-37-22> 22</a></span>
<span class=normal><a href=#__codelineno-37-23> 23</a></span>
<span class=normal><a href=#__codelineno-37-24> 24</a></span>
<span class=normal><a href=#__codelineno-37-25> 25</a></span>
<span class=normal><a href=#__codelineno-37-26> 26</a></span>
<span class=normal><a href=#__codelineno-37-27> 27</a></span>
<span class=normal><a href=#__codelineno-37-28> 28</a></span>
<span class=normal><a href=#__codelineno-37-29> 29</a></span>
<span class=normal><a href=#__codelineno-37-30> 30</a></span>
<span class=normal><a href=#__codelineno-37-31> 31</a></span>
<span class=normal><a href=#__codelineno-37-32> 32</a></span>
<span class=normal><a href=#__codelineno-37-33> 33</a></span>
<span class=normal><a href=#__codelineno-37-34> 34</a></span>
<span class=normal><a href=#__codelineno-37-35> 35</a></span>
<span class=normal><a href=#__codelineno-37-36> 36</a></span>
<span class=normal><a href=#__codelineno-37-37> 37</a></span>
<span class=normal><a href=#__codelineno-37-38> 38</a></span>
<span class=normal><a href=#__codelineno-37-39> 39</a></span>
<span class=normal><a href=#__codelineno-37-40> 40</a></span>
<span class=normal><a href=#__codelineno-37-41> 41</a></span>
<span class=normal><a href=#__codelineno-37-42> 42</a></span>
<span class=normal><a href=#__codelineno-37-43> 43</a></span>
<span class=normal><a href=#__codelineno-37-44> 44</a></span>
<span class=normal><a href=#__codelineno-37-45> 45</a></span>
<span class=normal><a href=#__codelineno-37-46> 46</a></span>
<span class=normal><a href=#__codelineno-37-47> 47</a></span>
<span class=normal><a href=#__codelineno-37-48> 48</a></span>
<span class=normal><a href=#__codelineno-37-49> 49</a></span>
<span class=normal><a href=#__codelineno-37-50> 50</a></span>
<span class=normal><a href=#__codelineno-37-51> 51</a></span>
<span class=normal><a href=#__codelineno-37-52> 52</a></span>
<span class=normal><a href=#__codelineno-37-53> 53</a></span>
<span class=normal><a href=#__codelineno-37-54> 54</a></span>
<span class=normal><a href=#__codelineno-37-55> 55</a></span>
<span class=normal><a href=#__codelineno-37-56> 56</a></span>
<span class=normal><a href=#__codelineno-37-57> 57</a></span>
<span class=normal><a href=#__codelineno-37-58> 58</a></span>
<span class=normal><a href=#__codelineno-37-59> 59</a></span>
<span class=normal><a href=#__codelineno-37-60> 60</a></span>
<span class=normal><a href=#__codelineno-37-61> 61</a></span>
<span class=normal><a href=#__codelineno-37-62> 62</a></span>
<span class=normal><a href=#__codelineno-37-63> 63</a></span>
<span class=normal><a href=#__codelineno-37-64> 64</a></span>
<span class=normal><a href=#__codelineno-37-65> 65</a></span>
<span class=normal><a href=#__codelineno-37-66> 66</a></span>
<span class=normal><a href=#__codelineno-37-67> 67</a></span>
<span class=normal><a href=#__codelineno-37-68> 68</a></span>
<span class=normal><a href=#__codelineno-37-69> 69</a></span>
<span class=normal><a href=#__codelineno-37-70> 70</a></span>
<span class=normal><a href=#__codelineno-37-71> 71</a></span>
<span class=normal><a href=#__codelineno-37-72> 72</a></span>
<span class=normal><a href=#__codelineno-37-73> 73</a></span>
<span class=normal><a href=#__codelineno-37-74> 74</a></span>
<span class=normal><a href=#__codelineno-37-75> 75</a></span>
<span class=normal><a href=#__codelineno-37-76> 76</a></span>
<span class=normal><a href=#__codelineno-37-77> 77</a></span>
<span class=normal><a href=#__codelineno-37-78> 78</a></span>
<span class=normal><a href=#__codelineno-37-79> 79</a></span>
<span class=normal><a href=#__codelineno-37-80> 80</a></span>
<span class=normal><a href=#__codelineno-37-81> 81</a></span>
<span class=normal><a href=#__codelineno-37-82> 82</a></span>
<span class=normal><a href=#__codelineno-37-83> 83</a></span>
<span class=normal><a href=#__codelineno-37-84> 84</a></span>
<span class=normal><a href=#__codelineno-37-85> 85</a></span>
<span class=normal><a href=#__codelineno-37-86> 86</a></span>
<span class=normal><a href=#__codelineno-37-87> 87</a></span>
<span class=normal><a href=#__codelineno-37-88> 88</a></span>
<span class=normal><a href=#__codelineno-37-89> 89</a></span>
<span class=normal><a href=#__codelineno-37-90> 90</a></span>
<span class=normal><a href=#__codelineno-37-91> 91</a></span>
<span class=normal><a href=#__codelineno-37-92> 92</a></span>
<span class=normal><a href=#__codelineno-37-93> 93</a></span>
<span class=normal><a href=#__codelineno-37-94> 94</a></span>
<span class=normal><a href=#__codelineno-37-95> 95</a></span>
<span class=normal><a href=#__codelineno-37-96> 96</a></span>
<span class=normal><a href=#__codelineno-37-97> 97</a></span>
<span class=normal><a href=#__codelineno-37-98> 98</a></span>
<span class=normal><a href=#__codelineno-37-99> 99</a></span>
<span class=normal><a href=#__codelineno-37-100>100</a></span>
<span class=normal><a href=#__codelineno-37-101>101</a></span>
<span class=normal><a href=#__codelineno-37-102>102</a></span>
<span class=normal><a href=#__codelineno-37-103>103</a></span>
<span class=normal><a href=#__codelineno-37-104>104</a></span>
<span class=normal><a href=#__codelineno-37-105>105</a></span>
<span class=normal><a href=#__codelineno-37-106>106</a></span>
<span class=normal><a href=#__codelineno-37-107>107</a></span>
<span class=normal><a href=#__codelineno-37-108>108</a></span>
<span class=normal><a href=#__codelineno-37-109>109</a></span>
<span class=normal><a href=#__codelineno-37-110>110</a></span>
<span class=normal><a href=#__codelineno-37-111>111</a></span>
<span class=normal><a href=#__codelineno-37-112>112</a></span>
<span class=normal><a href=#__codelineno-37-113>113</a></span>
<span class=normal><a href=#__codelineno-37-114>114</a></span>
<span class=normal><a href=#__codelineno-37-115>115</a></span>
<span class=normal><a href=#__codelineno-37-116>116</a></span>
<span class=normal><a href=#__codelineno-37-117>117</a></span>
<span class=normal><a href=#__codelineno-37-118>118</a></span>
<span class=normal><a href=#__codelineno-37-119>119</a></span>
<span class=normal><a href=#__codelineno-37-120>120</a></span>
<span class=normal><a href=#__codelineno-37-121>121</a></span>
<span class=normal><a href=#__codelineno-37-122>122</a></span>
<span class=normal><a href=#__codelineno-37-123>123</a></span>
<span class=normal><a href=#__codelineno-37-124>124</a></span>
<span class=normal><a href=#__codelineno-37-125>125</a></span>
<span class=normal><a href=#__codelineno-37-126>126</a></span>
<span class=normal><a href=#__codelineno-37-127>127</a></span>
<span class=normal><a href=#__codelineno-37-128>128</a></span>
<span class=normal><a href=#__codelineno-37-129>129</a></span>
<span class=normal><a href=#__codelineno-37-130>130</a></span>
<span class=normal><a href=#__codelineno-37-131>131</a></span>
<span class=normal><a href=#__codelineno-37-132>132</a></span>
<span class=normal><a href=#__codelineno-37-133>133</a></span>
<span class=normal><a href=#__codelineno-37-134>134</a></span>
<span class=normal><a href=#__codelineno-37-135>135</a></span>
<span class=normal><a href=#__codelineno-37-136>136</a></span>
<span class=normal><a href=#__codelineno-37-137>137</a></span>
<span class=normal><a href=#__codelineno-37-138>138</a></span>
<span class=normal><a href=#__codelineno-37-139>139</a></span>
<span class=normal><a href=#__codelineno-37-140>140</a></span>
<span class=normal><a href=#__codelineno-37-141>141</a></span>
<span class=normal><a href=#__codelineno-37-142>142</a></span>
<span class=normal><a href=#__codelineno-37-143>143</a></span>
<span class=normal><a href=#__codelineno-37-144>144</a></span>
<span class=normal><a href=#__codelineno-37-145>145</a></span>
<span class=normal><a href=#__codelineno-37-146>146</a></span>
<span class=normal><a href=#__codelineno-37-147>147</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3></a><span class=k>using</span><span class=w> </span><span class=n>i64</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=p>;</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4></a><span class=c1>// 右 上 左 下</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5></a><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>dx</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>-1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>};</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6></a><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>dy</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>-1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7></a><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8></a><span class=c1>// | - \ /</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9></a><span class=kt>int</span><span class=w> </span><span class=n>D</span><span class=p>[</span><span class=mi>4</span><span class=p>][</span><span class=mi>4</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10></a><span class=w>    </span><span class=p>{</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>},</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11></a><span class=w>    </span><span class=p>{</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>},</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12></a><span class=w>    </span><span class=p>{</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>},</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13></a><span class=w>    </span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>}</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14></a><span class=p>};</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15></a><span class=kt>int</span><span class=w> </span><span class=n>g</span><span class=p>[</span><span class=mi>1005</span><span class=p>][</span><span class=mi>1005</span><span class=p>];</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16></a><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=mi>1005</span><span class=p>][</span><span class=mi>1005</span><span class=p>][</span><span class=mi>4</span><span class=p>];</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17></a><span class=kt>int</span><span class=w> </span><span class=n>tot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>array</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=mi>1005</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>4</span><span class=p>];</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19></a><span class=kt>bool</span><span class=w> </span><span class=n>vis</span><span class=p>[</span><span class=mi>1005</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>4</span><span class=p>];</span>
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20></a><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=p>[</span><span class=mi>1005</span><span class=p>][</span><span class=mi>1005</span><span class=p>][</span><span class=mi>4</span><span class=p>];</span>
</span><span id=__span-37-21><a id=__codelineno-37-21 name=__codelineno-37-21></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-22><a id=__codelineno-37-22 name=__codelineno-37-22></a><span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-37-23><a id=__codelineno-37-23 name=__codelineno-37-23></a><span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-37-24><a id=__codelineno-37-24 name=__codelineno-37-24></a><span class=w>    </span><span class=n>cout</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-37-25><a id=__codelineno-37-25 name=__codelineno-37-25></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
</span><span id=__span-37-26><a id=__codelineno-37-26 name=__codelineno-37-26></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=kt>char</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>f</span><span class=p>;</span>
</span><span id=__span-37-27><a id=__codelineno-37-27 name=__codelineno-37-27></a><span class=w>    </span><span class=n>f</span><span class=p>[</span><span class=sc>&#39;|&#39;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>f</span><span class=p>[</span><span class=sc>&#39;-&#39;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>f</span><span class=p>[</span><span class=sc>&#39;\\&#39;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w> </span><span class=n>f</span><span class=p>[</span><span class=sc>&#39;/&#39;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span><span id=__span-37-28><a id=__codelineno-37-28 name=__codelineno-37-28></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>mp</span><span class=p>;</span>
</span><span id=__span-37-29><a id=__codelineno-37-29 name=__codelineno-37-29></a><span class=w>    </span><span class=n>mp</span><span class=p>[</span><span class=s>&quot;below&quot;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w> </span><span class=n>mp</span><span class=p>[</span><span class=s>&quot;right&quot;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>mp</span><span class=p>[</span><span class=s>&quot;left&quot;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w> </span><span class=n>mp</span><span class=p>[</span><span class=s>&quot;above&quot;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-37-30><a id=__codelineno-37-30 name=__codelineno-37-30></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-31><a id=__codelineno-37-31 name=__codelineno-37-31></a><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-37-32><a id=__codelineno-37-32 name=__codelineno-37-32></a><span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-37-33><a id=__codelineno-37-33 name=__codelineno-37-33></a><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot; &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-37-34><a id=__codelineno-37-34 name=__codelineno-37-34></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-35><a id=__codelineno-37-35 name=__codelineno-37-35></a><span class=w>            </span><span class=n>g</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>f</span><span class=p>[</span><span class=n>str</span><span class=p>[</span><span class=n>j</span><span class=p>]];</span>
</span><span id=__span-37-36><a id=__codelineno-37-36 name=__codelineno-37-36></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-37><a id=__codelineno-37-37 name=__codelineno-37-37></a>
</span><span id=__span-37-38><a id=__codelineno-37-38 name=__codelineno-37-38></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-39><a id=__codelineno-37-39 name=__codelineno-37-39></a><span class=w>    </span><span class=c1>// 连通块染色</span>
</span><span id=__span-37-40><a id=__codelineno-37-40 name=__codelineno-37-40></a><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>work1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>d</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-41><a id=__codelineno-37-41 name=__codelineno-37-41></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=nb>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-42><a id=__codelineno-37-42 name=__codelineno-37-42></a><span class=w>            </span><span class=n>c</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>][</span><span class=n>d</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tot</span><span class=p>;</span>
</span><span id=__span-37-43><a id=__codelineno-37-43 name=__codelineno-37-43></a><span class=w>            </span><span class=n>vec</span><span class=p>[</span><span class=n>tot</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=p>});</span>
</span><span id=__span-37-44><a id=__codelineno-37-44 name=__codelineno-37-44></a><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>xx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dx</span><span class=p>[</span><span class=n>d</span><span class=p>],</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dy</span><span class=p>[</span><span class=n>d</span><span class=p>];</span>
</span><span id=__span-37-45><a id=__codelineno-37-45 name=__codelineno-37-45></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>xx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>xx</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>m</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-46><a id=__codelineno-37-46 name=__codelineno-37-46></a><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-37-47><a id=__codelineno-37-47 name=__codelineno-37-47></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-48><a id=__codelineno-37-48 name=__codelineno-37-48></a><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>dd</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>D</span><span class=p>[</span><span class=n>g</span><span class=p>[</span><span class=n>xx</span><span class=p>][</span><span class=n>yy</span><span class=p>]][</span><span class=n>d</span><span class=p>];</span>
</span><span id=__span-37-49><a id=__codelineno-37-49 name=__codelineno-37-49></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>xx</span><span class=p>][</span><span class=n>yy</span><span class=p>][</span><span class=n>dd</span><span class=p>]</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-50><a id=__codelineno-37-50 name=__codelineno-37-50></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>xx</span><span class=p>][</span><span class=n>yy</span><span class=p>][</span><span class=n>dd</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>][</span><span class=n>d</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-51><a id=__codelineno-37-51 name=__codelineno-37-51></a><span class=w>                    </span><span class=n>vis</span><span class=p>[</span><span class=n>tot</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
</span><span id=__span-37-52><a id=__codelineno-37-52 name=__codelineno-37-52></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-37-53><a id=__codelineno-37-53 name=__codelineno-37-53></a><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-37-54><a id=__codelineno-37-54 name=__codelineno-37-54></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-55><a id=__codelineno-37-55 name=__codelineno-37-55></a><span class=w>            </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>xx</span><span class=p>;</span>
</span><span id=__span-37-56><a id=__codelineno-37-56 name=__codelineno-37-56></a><span class=w>            </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yy</span><span class=p>;</span>
</span><span id=__span-37-57><a id=__codelineno-37-57 name=__codelineno-37-57></a><span class=w>            </span><span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dd</span><span class=p>;</span>
</span><span id=__span-37-58><a id=__codelineno-37-58 name=__codelineno-37-58></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-59><a id=__codelineno-37-59 name=__codelineno-37-59></a><span class=w>        </span><span class=n>tot</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-37-60><a id=__codelineno-37-60 name=__codelineno-37-60></a><span class=w>    </span><span class=p>};</span>
</span><span id=__span-37-61><a id=__codelineno-37-61 name=__codelineno-37-61></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-62><a id=__codelineno-37-62 name=__codelineno-37-62></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-63><a id=__codelineno-37-63 name=__codelineno-37-63></a><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-64><a id=__codelineno-37-64 name=__codelineno-37-64></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-65><a id=__codelineno-37-65 name=__codelineno-37-65></a><span class=w>                    </span><span class=n>work1</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>);</span>
</span><span id=__span-37-66><a id=__codelineno-37-66 name=__codelineno-37-66></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-37-67><a id=__codelineno-37-67 name=__codelineno-37-67></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-68><a id=__codelineno-37-68 name=__codelineno-37-68></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-69><a id=__codelineno-37-69 name=__codelineno-37-69></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-70><a id=__codelineno-37-70 name=__codelineno-37-70></a><span class=w>    </span><span class=c1>// 预处理所有环</span>
</span><span id=__span-37-71><a id=__codelineno-37-71 name=__codelineno-37-71></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>tot</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-72><a id=__codelineno-37-72 name=__codelineno-37-72></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>vis</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=w> </span><span class=k>continue</span><span class=p>;</span>
</span><span id=__span-37-73><a id=__codelineno-37-73 name=__codelineno-37-73></a><span class=w>        </span><span class=kt>bool</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
</span><span id=__span-37-74><a id=__codelineno-37-74 name=__codelineno-37-74></a><span class=w>        </span><span class=n>unordered_set</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>st</span><span class=p>;</span>
</span><span id=__span-37-75><a id=__codelineno-37-75 name=__codelineno-37-75></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-37-76><a id=__codelineno-37-76 name=__codelineno-37-76></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-77><a id=__codelineno-37-77 name=__codelineno-37-77></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x1</span><span class=p>,</span><span class=w> </span><span class=n>y1</span><span class=p>,</span><span class=w> </span><span class=n>d1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>i</span><span class=p>][(</span><span class=n>j</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>len</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>len</span><span class=p>];</span>
</span><span id=__span-37-78><a id=__codelineno-37-78 name=__codelineno-37-78></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x2</span><span class=p>,</span><span class=w> </span><span class=n>y2</span><span class=p>,</span><span class=w> </span><span class=n>d2</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
</span><span id=__span-37-79><a id=__codelineno-37-79 name=__codelineno-37-79></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>d1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>d2</span><span class=p>)</span><span class=w> </span><span class=k>continue</span><span class=p>;</span>
</span><span id=__span-37-80><a id=__codelineno-37-80 name=__codelineno-37-80></a><span class=w>            </span><span class=n>st</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=n>x2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y2</span><span class=p>);</span>
</span><span id=__span-37-81><a id=__codelineno-37-81 name=__codelineno-37-81></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-82><a id=__codelineno-37-82 name=__codelineno-37-82></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>st</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-37-83><a id=__codelineno-37-83 name=__codelineno-37-83></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=p>[</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=p>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-84><a id=__codelineno-37-84 name=__codelineno-37-84></a><span class=w>            </span><span class=n>ans</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>][</span><span class=n>d</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>res</span><span class=p>;</span>
</span><span id=__span-37-85><a id=__codelineno-37-85 name=__codelineno-37-85></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-86><a id=__codelineno-37-86 name=__codelineno-37-86></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-87><a id=__codelineno-37-87 name=__codelineno-37-87></a><span class=w>    </span><span class=c1>// 预处理所有链</span>
</span><span id=__span-37-88><a id=__codelineno-37-88 name=__codelineno-37-88></a><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>work2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>d</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-89><a id=__codelineno-37-89 name=__codelineno-37-89></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>array</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>path</span><span class=p>;</span>
</span><span id=__span-37-90><a id=__codelineno-37-90 name=__codelineno-37-90></a><span class=w>        </span><span class=k>do</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-91><a id=__codelineno-37-91 name=__codelineno-37-91></a><span class=w>            </span><span class=n>path</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=p>});</span>
</span><span id=__span-37-92><a id=__codelineno-37-92 name=__codelineno-37-92></a><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>xx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dx</span><span class=p>[</span><span class=n>d</span><span class=p>],</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dy</span><span class=p>[</span><span class=n>d</span><span class=p>];</span>
</span><span id=__span-37-93><a id=__codelineno-37-93 name=__codelineno-37-93></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>xx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>xx</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>yy</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>m</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-94><a id=__codelineno-37-94 name=__codelineno-37-94></a><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-37-95><a id=__codelineno-37-95 name=__codelineno-37-95></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-96><a id=__codelineno-37-96 name=__codelineno-37-96></a><span class=w>            </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>xx</span><span class=p>;</span>
</span><span id=__span-37-97><a id=__codelineno-37-97 name=__codelineno-37-97></a><span class=w>            </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yy</span><span class=p>;</span>
</span><span id=__span-37-98><a id=__codelineno-37-98 name=__codelineno-37-98></a><span class=w>            </span><span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>D</span><span class=p>[</span><span class=n>g</span><span class=p>[</span><span class=n>xx</span><span class=p>][</span><span class=n>yy</span><span class=p>]][</span><span class=n>d</span><span class=p>];</span>
</span><span id=__span-37-99><a id=__codelineno-37-99 name=__codelineno-37-99></a><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=nb>true</span><span class=p>);</span>
</span><span id=__span-37-100><a id=__codelineno-37-100 name=__codelineno-37-100></a><span class=w>        </span><span class=n>map</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>cnt</span><span class=p>;</span>
</span><span id=__span-37-101><a id=__codelineno-37-101 name=__codelineno-37-101></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>path</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-37-102><a id=__codelineno-37-102 name=__codelineno-37-102></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-103><a id=__codelineno-37-103 name=__codelineno-37-103></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x1</span><span class=p>,</span><span class=w> </span><span class=n>y1</span><span class=p>,</span><span class=w> </span><span class=n>d1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>path</span><span class=p>[</span><span class=n>k</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>];</span>
</span><span id=__span-37-104><a id=__codelineno-37-104 name=__codelineno-37-104></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x2</span><span class=p>,</span><span class=w> </span><span class=n>y2</span><span class=p>,</span><span class=w> </span><span class=n>d2</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>path</span><span class=p>[</span><span class=n>k</span><span class=p>];</span>
</span><span id=__span-37-105><a id=__codelineno-37-105 name=__codelineno-37-105></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>d1</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>d2</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-106><a id=__codelineno-37-106 name=__codelineno-37-106></a><span class=w>                </span><span class=n>cnt</span><span class=p>[</span><span class=n>x2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y2</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-37-107><a id=__codelineno-37-107 name=__codelineno-37-107></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-108><a id=__codelineno-37-108 name=__codelineno-37-108></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-109><a id=__codelineno-37-109 name=__codelineno-37-109></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-110><a id=__codelineno-37-110 name=__codelineno-37-110></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x1</span><span class=p>,</span><span class=w> </span><span class=n>y1</span><span class=p>,</span><span class=w> </span><span class=n>d1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>path</span><span class=p>[</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>];</span>
</span><span id=__span-37-111><a id=__codelineno-37-111 name=__codelineno-37-111></a><span class=w>            </span><span class=k>auto</span><span class=w> </span><span class=p>[</span><span class=n>x2</span><span class=p>,</span><span class=w> </span><span class=n>y2</span><span class=p>,</span><span class=w> </span><span class=n>d2</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>path</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-37-112><a id=__codelineno-37-112 name=__codelineno-37-112></a><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>td</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>d2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>4</span><span class=p>;</span>
</span><span id=__span-37-113><a id=__codelineno-37-113 name=__codelineno-37-113></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>d1</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>d2</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-114><a id=__codelineno-37-114 name=__codelineno-37-114></a><span class=w>                </span><span class=n>cnt</span><span class=p>[</span><span class=n>x1</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y1</span><span class=p>]</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-37-115><a id=__codelineno-37-115 name=__codelineno-37-115></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cnt</span><span class=p>[</span><span class=n>x1</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y1</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-116><a id=__codelineno-37-116 name=__codelineno-37-116></a><span class=w>                    </span><span class=n>cnt</span><span class=p>.</span><span class=n>erase</span><span class=p>(</span><span class=n>x1</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1005</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y1</span><span class=p>);</span>
</span><span id=__span-37-117><a id=__codelineno-37-117 name=__codelineno-37-117></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-37-118><a id=__codelineno-37-118 name=__codelineno-37-118></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-119><a id=__codelineno-37-119 name=__codelineno-37-119></a><span class=w>            </span><span class=n>ans</span><span class=p>[</span><span class=n>x1</span><span class=p>][</span><span class=n>y1</span><span class=p>][</span><span class=n>td</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cnt</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-37-120><a id=__codelineno-37-120 name=__codelineno-37-120></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-121><a id=__codelineno-37-121 name=__codelineno-37-121></a><span class=w>    </span><span class=p>};</span>
</span><span id=__span-37-122><a id=__codelineno-37-122 name=__codelineno-37-122></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-123><a id=__codelineno-37-123 name=__codelineno-37-123></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-124><a id=__codelineno-37-124 name=__codelineno-37-124></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-125><a id=__codelineno-37-125 name=__codelineno-37-125></a><span class=w>                </span><span class=n>work2</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
</span><span id=__span-37-126><a id=__codelineno-37-126 name=__codelineno-37-126></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-127><a id=__codelineno-37-127 name=__codelineno-37-127></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-128><a id=__codelineno-37-128 name=__codelineno-37-128></a><span class=w>                </span><span class=n>work2</span><span class=p>(</span><span class=n>n</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-37-129><a id=__codelineno-37-129 name=__codelineno-37-129></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-130><a id=__codelineno-37-130 name=__codelineno-37-130></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>j</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-131><a id=__codelineno-37-131 name=__codelineno-37-131></a><span class=w>                </span><span class=n>work2</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-37-132><a id=__codelineno-37-132 name=__codelineno-37-132></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-133><a id=__codelineno-37-133 name=__codelineno-37-133></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>j</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>m</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-134><a id=__codelineno-37-134 name=__codelineno-37-134></a><span class=w>                </span><span class=n>work2</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span>
</span><span id=__span-37-135><a id=__codelineno-37-135 name=__codelineno-37-135></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-37-136><a id=__codelineno-37-136 name=__codelineno-37-136></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-37-137><a id=__codelineno-37-137 name=__codelineno-37-137></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-138><a id=__codelineno-37-138 name=__codelineno-37-138></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>q</span><span class=p>;</span>
</span><span id=__span-37-139><a id=__codelineno-37-139 name=__codelineno-37-139></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>q</span><span class=p>;</span>
</span><span id=__span-37-140><a id=__codelineno-37-140 name=__codelineno-37-140></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>q</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-141><a id=__codelineno-37-141 name=__codelineno-37-141></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
</span><span id=__span-37-142><a id=__codelineno-37-142 name=__codelineno-37-142></a><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-37-143><a id=__codelineno-37-143 name=__codelineno-37-143></a><span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-37-144><a id=__codelineno-37-144 name=__codelineno-37-144></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ans</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>][</span><span class=n>mp</span><span class=p>[</span><span class=n>s</span><span class=p>]]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-37-145><a id=__codelineno-37-145 name=__codelineno-37-145></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-37-146><a id=__codelineno-37-146 name=__codelineno-37-146></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-37-147><a id=__codelineno-37-147 name=__codelineno-37-147></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=j-2d-travel>J 2D Travel</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FJ&parentPath=%2F">标程/数据</a></p> <h3 id=_81>题目描述</h3> <p>There is a robot in the 2D rectangular region <span class=arithmatex>\(W = \{(x,y) \; | \; 0\le x \le n, 0\le y \le m\}\)</span>. Assume that the robot is at <span class=arithmatex>\((x,y)\)</span> currently, it can move in the following four directions: </p> <ul> <li>U : go from <span class=arithmatex>\((x,y)\)</span> to <span class=arithmatex>\((x,y+1)\)</span> if <span class=arithmatex>\((x,y+1) \in W\)</span>;</li> <li>D : go from <span class=arithmatex>\((x,y)\)</span> to <span class=arithmatex>\((x,y-1)\)</span> if <span class=arithmatex>\((x,y-1) \in W\)</span>;</li> <li>L : go from <span class=arithmatex>\((x,y)\)</span> to <span class=arithmatex>\((x-1,y)\)</span> if <span class=arithmatex>\((x-1,y) \in W\)</span>;</li> <li>R : go from <span class=arithmatex>\((x,y)\)</span> to <span class=arithmatex>\((x+1,y)\)</span> if <span class=arithmatex>\((x+1,y) \in W\)</span>.</li> </ul> <p>An instruction contains a character <span class=arithmatex>\(c\)</span> of ``U'', ``D'', ``L'', ``R'' and an integer <span class=arithmatex>\(t\,(1 \le t \le 10^9)\)</span>, indicating that the robot moves in the direction <span class=arithmatex>\(c\)</span> for <span class=arithmatex>\(t\)</span> times consecutively under the instruction. </p> <p>Given a list of instructions of length <span class=arithmatex>\(k\)</span>, there are <span class=arithmatex>\(q\)</span> queries, you should report the final position and the length of the moving route if the robot starts moving from the given position <span class=arithmatex>\((x,y)\)</span> and does the <span class=arithmatex>\(l\)</span>-th, <span class=arithmatex>\((l+1)\)</span>-th, <span class=arithmatex>\((l+2)\)</span>-th, ..., <span class=arithmatex>\(r\)</span>-th instructions one by one for each query.</p> <h3 id=_82>输入描述</h3> <p>The first line contains four integers <span class=arithmatex>\(n, m\,(1 \le n, m \le 10^9)\)</span>, <span class=arithmatex>\(k, q\,(1 \le k, q \le 10^5)\)</span>, denoting the size of the rectangular region, the number of instructions, and the number of queries respectively. </p> <p>Each of the following <span class=arithmatex>\(k\)</span> lines contains a character <span class=arithmatex>\(c\)</span> of ``U'', ``D'', ``L'', ``R'' and an integer <span class=arithmatex>\(t\,(1 \le t \le 10^9)\)</span>, denoting an instruction. </p> <p>Each of the following <span class=arithmatex>\(q\)</span> lines contains four integers <span class=arithmatex>\(x\,(0 \le x \le n)\)</span>, <span class=arithmatex>\(y\,(0 \le y \le m)\)</span>, <span class=arithmatex>\(l,r\,(1 \le l \le r \le k)\)</span>, denoting a query.</p> <h3 id=_83>输出描述</h3> <p>For each query, output a line containing three integers <span class=arithmatex>\(u,v\)</span> and <span class=arithmatex>\(w\)</span>, denoting the coordinates of the final position and the length of the moving route.</p> <h3 id=1_9>示例1</h3> <h4 id=_84>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-38-1>1</a></span>
<span class=normal><a href=#__codelineno-38-2>2</a></span>
<span class=normal><a href=#__codelineno-38-3>3</a></span>
<span class=normal><a href=#__codelineno-38-4>4</a></span>
<span class=normal><a href=#__codelineno-38-5>5</a></span>
<span class=normal><a href=#__codelineno-38-6>6</a></span>
<span class=normal><a href=#__codelineno-38-7>7</a></span>
<span class=normal><a href=#__codelineno-38-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1></a>3 2 5 2
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2></a>L 2
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3></a>D 2
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4></a>R 1
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5></a>R 1
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6></a>U 2
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7></a>1 1 1 3
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8></a>2 1 2 5
</span></code></pre></div></td></tr></table></div> <h4 id=_85>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-39-1>1</a></span>
<span class=normal><a href=#__codelineno-39-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1></a>1 0 3
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2></a>3 2 4
</span></code></pre></div></td></tr></table></div> <h4 id=_86>说明</h4> <p>· For the first query, the moving route is <span class=arithmatex>\((1,1) \xrightarrow{L} (0,1) \xrightarrow{L} (0,1) \xrightarrow{D} (0,0) \xrightarrow{D} (0,0) \xrightarrow{R} (1,0)\)</span>, where the final position is <span class=arithmatex>\((1,0)\)</span> and the length of the moving route is <span class=arithmatex>\(3\)</span>.<br> · For the second query, the moving route is <span class=arithmatex>\((2,1) \xrightarrow{D} (2,0) \xrightarrow{D} (2,0) \xrightarrow{R} (3,0) \xrightarrow{R} (3,0) \xrightarrow{U} (3,1) \xrightarrow{U} (3,2)\)</span>, where the final position is <span class=arithmatex>\((3,2)\)</span> and the length of the moving route is <span class=arithmatex>\(4\)</span>. </p> <h3 id=2_7>示例2</h3> <h4 id=_87>输入</h4> <h4 id=_88>输出</h4> <h2 id=k-matching-problem>K Matching Problem</h2> <p><a href="https://pan.baidu.com/s/1LF4p4ztWXPKPzpjEg-hcgQ?pwd=h9cc#list/path=%2F2024%E6%9A%91%E6%9C%9F%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%2F%E7%AC%AC%E4%B8%80%E5%9C%BA%2FK&parentPath=%2F">标程/数据</a></p> <h3 id=_89>题目描述</h3> <p>Given a simple undirected connected graph <span class=arithmatex>\(G\)</span>, where the number of edges equals the number of vertices, and an unrooted tree <span class=arithmatex>\(H\)</span>, determine whether <span class=arithmatex>\(H\)</span> can be produced by erasing vertices or edges and relabeling vertices from <span class=arithmatex>\(G\)</span>.</p> <h3 id=_90>输入描述</h3> <p>The first line contains one integer <span class=arithmatex>\(T\,(1 \le T \le 1\,000)\)</span>, denoting the number of test cases. </p> <p>For each test case: </p> <p>The first line contains one integer <span class=arithmatex>\(n\,(3 \le n \le 1\,000)\)</span>, denoting the number of vertices as well as edges of graph <span class=arithmatex>\(G\)</span>. </p> <p>The next <span class=arithmatex>\(n\)</span> lines each contain two integers <span class=arithmatex>\(u,v\,(1\le u,v \le n)\)</span>, denoting the edges of graph <span class=arithmatex>\(G\)</span>. It is guaranteed that graph <span class=arithmatex>\(G\)</span> contains no self-loops or multiple edges. </p> <p>The next one line contains one integer <span class=arithmatex>\(m\,(1 \le m \le n)\)</span>, denoting the number of vertices of tree <span class=arithmatex>\(H\)</span>. </p> <p>The next <span class=arithmatex>\(m - 1\)</span> lines each contain two integers <span class=arithmatex>\(u,v\,(1\le u,v \le m)\)</span>, denoting the edges of tree <span class=arithmatex>\(H\)</span>. </p> <p>It is guaranteed that the sum of <span class=arithmatex>\(n\)</span> among all test cases does not exceed <span class=arithmatex>\(1\,000\)</span>.</p> <h3 id=_91>输出描述</h3> <p>Output <span class=arithmatex>\(T\)</span> lines each containing one string, ``Yes'' if <span class=arithmatex>\(H\)</span> can be produced from <span class=arithmatex>\(G\)</span>, or ``No'' if <span class=arithmatex>\(H\)</span> cannot be produced from <span class=arithmatex>\(G\)</span>.</p> <h3 id=1_10>示例1</h3> <h4 id=_92>输入</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-40-1> 1</a></span>
<span class=normal><a href=#__codelineno-40-2> 2</a></span>
<span class=normal><a href=#__codelineno-40-3> 3</a></span>
<span class=normal><a href=#__codelineno-40-4> 4</a></span>
<span class=normal><a href=#__codelineno-40-5> 5</a></span>
<span class=normal><a href=#__codelineno-40-6> 6</a></span>
<span class=normal><a href=#__codelineno-40-7> 7</a></span>
<span class=normal><a href=#__codelineno-40-8> 8</a></span>
<span class=normal><a href=#__codelineno-40-9> 9</a></span>
<span class=normal><a href=#__codelineno-40-10>10</a></span>
<span class=normal><a href=#__codelineno-40-11>11</a></span>
<span class=normal><a href=#__codelineno-40-12>12</a></span>
<span class=normal><a href=#__codelineno-40-13>13</a></span>
<span class=normal><a href=#__codelineno-40-14>14</a></span>
<span class=normal><a href=#__codelineno-40-15>15</a></span>
<span class=normal><a href=#__codelineno-40-16>16</a></span>
<span class=normal><a href=#__codelineno-40-17>17</a></span>
<span class=normal><a href=#__codelineno-40-18>18</a></span>
<span class=normal><a href=#__codelineno-40-19>19</a></span>
<span class=normal><a href=#__codelineno-40-20>20</a></span>
<span class=normal><a href=#__codelineno-40-21>21</a></span>
<span class=normal><a href=#__codelineno-40-22>22</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1></a>2
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2></a>6
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3></a>1 2
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4></a>1 3
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5></a>2 3
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6></a>1 4
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7></a>2 5
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8></a>3 6
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9></a>5
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10></a>1 2
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11></a>2 3
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12></a>3 4
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13></a>4 5
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14></a>4
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15></a>1 2
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16></a>2 3
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17></a>3 4
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18></a>4 1
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19></a>4
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20></a>1 2
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21></a>1 3
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22></a>1 4
</span></code></pre></div></td></tr></table></div> <h4 id=_93>输出</h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-41-1>1</a></span>
<span class=normal><a href=#__codelineno-41-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1></a>Yes
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2></a>No
</span></code></pre></div></td></tr></table></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../../../../template/problem-set/ class="md-footer__link md-footer__link--prev" aria-label="上一页: 习题"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一页 </span> <div class=md-ellipsis> 习题 </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2024 <a href=https://gitee.com/OneOneNineCodeHome target=_blank rel=noopener>OneWan</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <span id=busuanzi_container_page_pv> &#x672C;&#x6587;&#x603B;&#x9605;&#x8BFB;&#x91CF; <span id=busuanzi_value_page_pv></span> &#x6B21; </span> </div> </div> <script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.footer", "navigation.tracking", "navigation.top", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "toc.integrate", "toc.follow", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy", "content.code.annotation"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../../assets/javascripts/bundle.c8d2eff1.min.js></script> <script src=../../../../static/js/mathjax.8f116a.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=../../../../static/js/tex-mml-chtml.3eccfc.min.js></script> </body> </html>